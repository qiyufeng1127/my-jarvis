# 事件卡片验证功能完整说明

## 📋 目录
1. [验证功能概述](#验证功能概述)
2. [验证方式](#验证方式)
3. [验证难度](#验证难度)
4. [验证流程](#验证流程)
5. [金币奖惩机制](#金币奖惩机制)
6. [验证配置](#验证配置)
7. [AI智能验证](#ai智能验证)
8. [使用示例](#使用示例)

---

### AI验证 - 文件验证

**API调用**：
```typescript
const result = await aiService.verifyTaskFile(
  fileName,         // 文件名
  fileSize,         // 文件大小（字节）
  fileType,         // 文件类型
  requirement,      // 验证要求
  taskTitle         // 任务标题
);

// 返回结果
{
  success: true,
  isValid: true,
  confidence: 0.88,
  reason: '文件名与任务相关，文件类型和大小符合要求'
}
```

**验证标准**：
- 文件名与任务相关性
- 文件类型是否符合要求
- 文件大小是否合理
- 是否为测试文件

---

## 百度图像识别配置指南

### 获取百度API密钥

1. 访问百度AI开放平台：https://ai.baidu.com/
2. 注册/登录账号
3. 进入控制台 → 创建应用
4. 选择"图像识别" → "通用物体识别"
5. 获取 API Key 和 Secret Key

### 在系统中配置

1. 打开用户设置页面
2. 找到"API配置"部分
3. 填入百度API Key和Secret Key
4. 保存设置

### 验证配置是否成功

创建一个测试任务：
```typescript
const testTask: Partial<Task> = {
  title: '测试厨房验证',
  verificationStart: {
    type: 'photo',
    requirement: '拍摄厨房照片',
    timeout: 60
  }
};
```

拍摄一张厨房照片，查看验证结果：
- ✅ 如果显示"识别到与任务相关的物体"，说明配置成功
- ❌ 如果显示"验证失败"，检查API密钥是否正确

### 费用说明

百度图像识别API：
- 免费额度：每天500次
- 超出后：按次计费，约0.002元/次
- 详情：https://ai.baidu.com/ai-doc/IMAGERECOGNITION/price

---

## 验证功能概述

验证功能是ManifestOS的核心防拖延机制，通过要求用户在任务开始和完成时提供证据（照片、文件等），确保任务真实执行，防止自欺欺人。

### 核心理念
- **开始验证**：确保任务真正开始执行
- **完成验证**：确保任务真正完成
- **进度检查**：在任务执行过程中随机检查，防止中途摸鱼
- **金币奖惩**：通过经济激励强化行为

---

## 验证方式

### 1. 拍照验证 (Photo)
**适用场景**：需要实时证明的任务
- 健身打卡（拍摄健身房环境）
- 学习打卡（拍摄书桌、笔记）
- 工作打卡（拍摄工作环境）
- 外出任务（拍摄目的地）

**技术实现**：
```typescript
interface VerificationConfig {
  type: 'photo';
  requirement: string; // 例如："拍摄健身房内的照片，需包含健身器材"
  timeout: number; // 超时时间（秒），例如：60
}
```

**验证标准**：
- ✅ 照片清晰可辨认
- ✅ 照片内容与任务相关
- ✅ 照片是实时拍摄（非网络图片或旧照片）
- ✅ 照片符合验证要求描述

**示例**：
```typescript
verificationStart: {
  type: 'photo',
  requirement: '拍摄健身房内的照片，需包含健身器材',
  timeout: 60
}
```

---

### 2. 图片上传验证 (Upload)
**适用场景**：需要上传已有图片的任务
- 设计作品提交（上传设计稿）
- 作业提交（上传作业截图）
- 成果展示（上传成品照片）

**技术实现**：
```typescript
interface VerificationConfig {
  type: 'upload';
  requirement: string; // 例如："上传设计稿，需包含完整的UI界面"
  timeout: number; // 超时时间（秒），例如：300
}
```

**验证标准**：
- ✅ 图片清晰可辨认
- ✅ 图片内容与任务相关
- ✅ 图片符合验证要求描述

---

### 3. 文件上传验证 (File)
**适用场景**：需要上传文档、代码等文件的任务
- 报告提交（上传Word/PDF文档）
- 代码提交（上传代码文件）
- 视频制作（上传视频文件）

**技术实现**：
```typescript
interface VerificationConfig {
  type: 'file';
  requirement: string; // 例如："上传项目报告，需为PDF或Word格式"
  timeout: number; // 超时时间（秒），例如：600
  acceptedFileTypes?: string[]; // 例如：['.pdf', '.docx', '.doc']
  maxFileSize?: number; // 最大文件大小（MB），例如：10
}
```

**验证标准**：
- ✅ 文件类型符合要求
- ✅ 文件大小在限制范围内
- ✅ 文件名与任务相关（非test.txt等测试文件）
- ✅ 文件内容符合验证要求

**示例**：
```typescript
verificationComplete: {
  type: 'file',
  requirement: '上传项目报告，需为PDF或Word格式',
  timeout: 600,
  acceptedFileTypes: ['.pdf', '.docx', '.doc'],
  maxFileSize: 10
}
```

---

## 验证难度

验证难度通过**用户设置**中的`verificationStrictness`控制，影响验证的严格程度和金币奖惩力度。

### 低难度 (Low)
**特点**：
- 验证超时时间较长（+50%）
- 金币惩罚较轻（-50%）
- AI验证置信度要求较低（≥0.6）
- 进度检查频率较低

**适用人群**：
- 刚开始使用系统的新手
- 自律性较好的用户
- 不需要强制约束的用户

**金币系数**：
- 奖励系数：1.0x
- 惩罚系数：0.5x

---

### 中等难度 (Medium) - 默认
**特点**：
- 验证超时时间标准
- 金币惩罚标准
- AI验证置信度要求标准（≥0.7）
- 进度检查频率标准

**适用人群**：
- 大多数用户
- 需要适度约束的用户

**金币系数**：
- 奖励系数：1.0x
- 惩罚系数：1.0x

---

### 高难度 (High)
**特点**：
- 验证超时时间较短（-30%）
- 金币惩罚较重（+50%）
- AI验证置信度要求较高（≥0.8）
- 进度检查频率较高

**适用人群**：
- 严重拖延症患者
- 需要强制约束的用户
- 追求极致自律的用户

**金币系数**：
- 奖励系数：1.2x（额外奖励20%）
- 惩罚系数：1.5x

---

## 验证流程

### 1. 任务开始验证流程

```
用户点击"开始任务"
    ↓
检查是否配置了开始验证
    ↓
是 → 进入验证状态 (verifying_start)
    ↓
显示验证界面（拍照/上传）
    ↓
用户提交证据
    ↓
AI智能验证 / 人工审核
    ↓
验证通过 → 任务状态变为 in_progress
    ↓
开始计时，记录 actualStart
    ↓
如果启用进度检查 → 随机触发进度检查

验证失败 → 任务状态变为 failed
    ↓
扣除惩罚金币
    ↓
记录失败原因
```

### 2. 任务完成验证流程

```
用户点击"完成任务"
    ↓
检查是否配置了完成验证
    ↓
是 → 进入验证状态 (verifying_complete)
    ↓
显示验证界面（拍照/上传）
    ↓
用户提交证据
    ↓
AI智能验证 / 人工审核
    ↓
验证通过 → 任务状态变为 completed
    ↓
记录 actualEnd
    ↓
计算金币奖励
    ↓
更新成长维度
    ↓
关联长期目标进度

验证失败 → 任务状态变为 failed
    ↓
扣除惩罚金币
    ↓
记录失败原因
```

### 3. 进度检查流程

```
任务执行中 (in_progress)
    ↓
系统随机触发进度检查
    ↓
弹出验证界面
    ↓
用户提交证据
    ↓
AI智能验证
    ↓
验证通过 → 继续执行任务
    ↓
记录检查通过

验证失败 → 任务状态变为 failed
    ↓
扣除惩罚金币
    ↓
记录失败原因（中途摸鱼）
```

---

## 金币奖惩机制

### 金币奖励计算

**基础奖励公式**：
```
基础金币 = 任务时长（分钟） × 1.5
```

**最终奖励公式**：
```
最终金币 = 基础金币 × 难度系数 × 质量系数 × 目标关联系数
```

**系数说明**：
- **难度系数**：
  - 低难度：1.0x
  - 中等难度：1.0x
  - 高难度：1.2x

- **质量系数**（根据完成质量评分）：
  - 5星（完美）：1.5x
  - 4星（优秀）：1.2x
  - 3星（良好）：1.0x
  - 2星（一般）：0.8x
  - 1星（勉强）：0.5x

- **目标关联系数**：
  - 关联长期目标：+20%
  - 关联多个目标：每个额外目标 +10%

**示例**：
```
任务：健身60分钟
基础金币 = 60 × 1.5 = 90
难度系数 = 1.2（高难度）
质量系数 = 1.5（5星完成）
目标关联系数 = 1.2（关联"健康生活"目标）

最终金币 = 90 × 1.2 × 1.5 × 1.2 = 194.4 ≈ 194金币
```

---

### 金币惩罚机制

#### 1. 验证超时惩罚
**触发条件**：在规定时间内未提交验证证据

**惩罚金额**：
```
惩罚金币 = 基础金币 × 0.5 × 难度系数
```

**示例**：
```
任务：健身60分钟（基础金币90）
难度：高难度（系数1.5）
惩罚 = 90 × 0.5 × 1.5 = 67.5 ≈ 68金币
```

---

#### 2. 验证失败惩罚
**触发条件**：提交的证据不符合要求（AI验证未通过）

**惩罚金额**：
```
惩罚金币 = 基础金币 × 0.3 × 难度系数
```

**示例**：
```
任务：健身60分钟（基础金币90）
难度：高难度（系数1.5）
惩罚 = 90 × 0.3 × 1.5 = 40.5 ≈ 41金币
```

---

#### 3. 进度检查失败惩罚
**触发条件**：任务执行过程中进度检查未通过

**惩罚金额**：
```
惩罚金币 = 基础金币 × 0.8 × 难度系数
```

**说明**：进度检查失败惩罚最重，因为说明用户中途摸鱼

**示例**：
```
任务：工作120分钟（基础金币180）
难度：高难度（系数1.5）
惩罚 = 180 × 0.8 × 1.5 = 216金币
```

---

#### 4. 任务取消惩罚
**触发条件**：用户主动取消已开始的任务

**惩罚金额**：
```
惩罚金币 = 基础金币 × 0.2 × 难度系数
```

**示例**：
```
任务：学习90分钟（基础金币135）
难度：中等难度（系数1.0）
惩罚 = 135 × 0.2 × 1.0 = 27金币
```

---

### 金币不足时的处理

**当用户金币余额不足以支付惩罚时**：

1. **允许负余额**：
   - 金币余额可以为负数
   - 显示为"欠债"状态
   - 用户需要通过完成任务来还债

2. **限制功能**：
   - 欠债时无法兑换奖励
   - 欠债超过500金币时，无法创建新任务
   - 必须先还清欠债才能恢复正常功能

3. **还债机制**：
   - 完成任务获得的金币优先用于还债
   - 还债期间金币奖励显示为"还债 +XX金币"
   - 还清欠债后恢复正常奖励显示

---

## 验证配置

### 在任务创建时配置验证

```typescript
const task: Partial<Task> = {
  title: '健身60分钟',
  durationMinutes: 60,
  
  // 开始验证配置
  verificationStart: {
    type: 'photo',
    requirement: '拍摄健身房内的照片，需包含健身器材',
    timeout: 60 // 60秒内完成验证
  },
  
  // 完成验证配置
  verificationComplete: {
    type: 'photo',
    requirement: '拍摄健身后的自拍，需显示出汗状态',
    timeout: 120 // 120秒内完成验证
  },
  
  // 启用进度检查
  enableProgressCheck: true,
  
  // 进度检查记录（系统自动填充）
  progressChecks: []
};
```

---

### 在用户设置中配置验证难度

```typescript
const settings: UserSettings = {
  // 验证严格程度
  verificationStrictness: 'high', // 'low' | 'medium' | 'high'
  
  // 是否启用进度检查
  enableProgressCheck: true,
  
  // 金币奖励倍数
  goldRewardMultiplier: 1.0,
  
  // 金币惩罚倍数
  goldPenaltyMultiplier: 1.0,
  
  // ... 其他设置
};
```

---

## AI智能验证

### AI验证原理

ManifestOS支持两种智能验证方式：

1. **百度图像识别API**（推荐）- 识别照片中的物体，验证是否包含任务相关物品
2. **AI文本分析**（降级方案）- 使用GPT-4 Vision或类似模型进行验证

系统会优先使用百度图像识别API（如果已配置），如果未配置或验证失败，则降级到AI文本分析。

### 验证流程

#### 方式1：百度图像识别验证（推荐）

```
用户提交照片
    ↓
检查是否配置了百度API
    ↓
是 → 调用百度图像识别API
    ↓
识别照片中的物体
    ↓
从任务标题和要求中提取关键词
    ↓
检查识别结果是否包含相关物体
    ↓
返回验证结果：
  - isValid: 是否通过
  - confidence: 置信度（匹配度）
  - matchedKeywords: 匹配的关键词
  - matchedObjects: 匹配的物体
  - recognizedObjects: 所有识别到的物体
    ↓
根据匹配结果判断：
  - 有匹配 → 自动通过
  - 无匹配 → 自动拒绝
```

#### 方式2：AI文本分析验证（降级方案）

```
用户提交证据（照片/文件）
    ↓
百度API未配置或验证失败
    ↓
调用AI验证API（GPT-4 Vision等）
    ↓
AI分析证据内容
    ↓
返回验证结果：
  - isValid: 是否通过
  - confidence: 置信度（0-1）
  - reason: 验证结果说明
    ↓
根据置信度判断：
  - confidence ≥ 0.8 → 自动通过
  - 0.6 ≤ confidence < 0.8 → 人工审核
  - confidence < 0.6 → 自动拒绝
```

---

### AI验证 - 百度图像识别（推荐）

#### 配置百度API

在用户设置中配置百度图像识别API：

```typescript
const settings: UserSettings = {
  // 百度API配置
  baiduApiKey: 'your_api_key',
  baiduSecretKey: 'your_secret_key',
  
  // ... 其他设置
};
```

#### 支持的关键词

百度图像识别支持以下关键词的自动识别：

**厨房相关**：
- 厨房、水槽、锅、碗、盘子、调料、冰箱

**厕所相关**：
- 厕所、马桶、洗手台、浴室、洗漱

**卧室相关**：
- 卧室、床、衣柜

**客厅相关**：
- 客厅、沙发、电视

**工作区相关**：
- 工作区、书桌、电脑、键盘、鼠标

**健身相关**：
- 健身房、跑步机、哑铃、瑜伽垫

**学习相关**：
- 书、笔记本、笔

**宠物相关**：
- 猫、狗、猫粮、猫砂

**清洁相关**：
- 扫把、拖把、垃圾桶、洗衣机

**食物相关**：
- 食物、水果、蔬菜

#### 验证标准（宽松模式）

百度图像识别采用**宽松验证标准**，只要照片中包含与任务关键词相关的物品就可以通过：

**示例1：厨房任务**
- 任务：洗碗
- 关键词：厨房、水槽
- 验证标准：照片中包含以下任意物品即可通过
  - ✅ 水槽、洗碗池、水龙头
  - ✅ 厨房、灶台、炉灶、油烟机、橱柜
  - ✅ 锅、碗、盘子、筷子、勺子
  - ✅ 调料、食材、冰箱

**示例2：宠物任务**
- 任务：给猫咪铲粑粑
- 关键词：猫
- 验证标准：照片中包含以下任意物品即可通过
  - ✅ 猫、猫咪
  - ✅ 猫粮、猫砂
  - ✅ 宠物用品

**示例3：工作任务**
- 任务：写代码
- 关键词：工作区、电脑
- 验证标准：照片中包含以下任意物品即可通过
  - ✅ 办公桌、书桌、电脑桌
  - ✅ 电脑、笔记本电脑、显示器
  - ✅ 键盘、鼠标
  - ✅ 台灯、文具

#### API调用示例

```typescript
import { baiduImageService } from '@/services/baiduImageService';

// 验证任务照片
const result = await baiduImageService.verifyTaskImage(
  imageBase64,      // 图片的Base64编码
  '洗碗',           // 任务标题
  '拍摄厨房水槽',   // 验证要求
  'your_api_key',   // 百度API Key
  'your_secret_key' // 百度Secret Key
);

// 返回结果
{
  success: true,
  isValid: true,
  confidence: 0.85,
  reason: '✅ 照片验证通过！识别到与任务相关的物体：水槽、碗',
  matchedKeywords: ['厨房', '水槽'],
  matchedObjects: ['水槽', '碗'],
  recognizedObjects: ['水槽', '碗', '筷子', '洗洁精', '水龙头']
}
```

#### 置信度计算

百度图像识别的置信度计算方式：

```
置信度 = 匹配的关键词数量 / 任务关键词总数量
```

**示例**：
- 任务关键词：['厨房', '水槽']（共2个）
- 匹配的关键词：['厨房', '水槽']（共2个）
- 置信度 = 2 / 2 = 1.0（100%）

**示例**：
- 任务关键词：['厨房', '水槽', '锅']（共3个）
- 匹配的关键词：['厨房', '水槽']（共2个）
- 置信度 = 2 / 3 = 0.67（67%）

#### 自定义关键词映射

如果需要添加自定义关键词，可以使用以下方法：

```typescript
import { baiduImageService } from '@/services/baiduImageService';

// 添加自定义关键词映射
baiduImageService.addKeywordMapping('拍摄间', [
  '摄影棚', '相机', '三脚架', '灯光', '背景布', '摄影器材'
]);

// 获取所有支持的关键词
const keywords = baiduImageService.getSupportedKeywords();
console.log('支持的关键词:', keywords);
```

---

### AI验证 - 文本分析（降级方案）

当百度API未配置或验证失败时，系统会自动降级到AI文本分析验证。

### AI验证 - 文本分析（降级方案）

当百度API未配置或验证失败时，系统会自动降级到AI文本分析验证。

**API调用**：
```typescript
const result = await aiService.verifyTaskImage(
  imageBase64,      // 图片的Base64编码
  requirement,      // 验证要求
  taskTitle         // 任务标题
);

// 返回结果
{
  success: true,
  isValid: true,
  confidence: 0.92,
  reason: '照片清晰显示健身房环境和健身器材，符合验证要求'
}
```

**验证标准**：
- 图片内容与任务相关性
- 图片清晰度
- 是否为实时拍摄（非网络图片）
- 是否符合验证要求描述

---

### AI验证置信度阈值

#### 百度图像识别（推荐）

百度图像识别采用**宽松验证标准**，只要有匹配就通过：

| 匹配情况 | 验证结果 | 说明 |
|---------|---------|------|
| 有匹配（confidence > 0） | ✅ 自动通过 | 照片中包含任务相关物品 |
| 无匹配（confidence = 0） | ❌ 自动拒绝 | 照片中未识别到相关物品 |

**示例**：
- 任务：洗碗（关键词：厨房、水槽）
- 照片识别到：水槽、碗、筷子
- 匹配结果：厨房✅、水槽✅
- 置信度：2/2 = 100%
- 验证结果：✅ 通过

#### AI文本分析（降级方案）

根据验证难度设置不同的置信度阈值：

| 难度 | 自动通过阈值 | 人工审核阈值 | 自动拒绝阈值 |
|------|-------------|-------------|-------------|
| 低   | ≥ 0.6       | 0.5 - 0.6   | < 0.5       |
| 中   | ≥ 0.7       | 0.6 - 0.7   | < 0.6       |
| 高   | ≥ 0.8       | 0.7 - 0.8   | < 0.7       |

---

## 使用示例

### 示例1：健身任务

```typescript
const fitnessTask: Partial<Task> = {
  title: '健身房锻炼60分钟',
  description: '进行力量训练和有氧运动',
  taskType: 'health',
  priority: 1,
  durationMinutes: 60,
  
  // 开始验证：拍摄健身房照片
  verificationStart: {
    type: 'photo',
    requirement: '拍摄健身房内的照片，需包含健身器材或健身环境',
    timeout: 60
  },
  
  // 完成验证：拍摄健身后自拍
  verificationComplete: {
    type: 'photo',
    requirement: '拍摄健身后的自拍，需显示出汗或疲惫状态',
    timeout: 120
  },
  
  // 启用进度检查（防止中途摸鱼）
  enableProgressCheck: true,
  
  // 预估金币奖励
  goldReward: 90 // 60分钟 × 1.5
};
```

**验证流程**：
1. 用户点击"开始任务"
2. 系统要求拍摄健身房照片（60秒内）
3. AI验证照片是否为健身房环境
4. 验证通过后，任务开始计时
5. 任务执行过程中，系统可能随机触发进度检查
6. 60分钟后，用户点击"完成任务"
7. 系统要求拍摄健身后自拍（120秒内）
8. AI验证照片是否显示运动后状态
9. 验证通过后，任务完成，获得金币奖励

---

### 示例2：学习任务

```typescript
const studyTask: Partial<Task> = {
  title: '学习React高级特性',
  description: '学习React Hooks和性能优化',
  taskType: 'study',
  priority: 2,
  durationMinutes: 120,
  
  // 开始验证：拍摄学习环境
  verificationStart: {
    type: 'photo',
    requirement: '拍摄书桌和学习资料，需显示电脑屏幕或书籍',
    timeout: 60
  },
  
  // 完成验证：上传学习笔记
  verificationComplete: {
    type: 'upload',
    requirement: '上传学习笔记截图或思维导图',
    timeout: 300
  },
  
  // 启用进度检查
  enableProgressCheck: true,
  
  // 预估金币奖励
  goldReward: 180 // 120分钟 × 1.5
};
```

---

### 示例3：工作任务

```typescript
const workTask: Partial<Task> = {
  title: '完成项目报告',
  description: '撰写Q1季度项目总结报告',
  taskType: 'work',
  priority: 1,
  durationMinutes: 180,
  
  // 开始验证：拍摄工作环境
  verificationStart: {
    type: 'photo',
    requirement: '拍摄工作桌面，需显示电脑和工作资料',
    timeout: 60
  },
  
  // 完成验证：上传报告文件
  verificationComplete: {
    type: 'file',
    requirement: '上传项目报告，需为PDF或Word格式，文件大小至少1MB',
    timeout: 600,
    acceptedFileTypes: ['.pdf', '.docx', '.doc'],
    maxFileSize: 10
  },
  
  // 启用进度检查
  enableProgressCheck: true,
  
  // 预估金币奖励
  goldReward: 270 // 180分钟 × 1.5
};
```

---

## 总结

### 验证功能的核心价值

1. **防止自欺欺人**：通过证据要求，确保任务真实执行
2. **强化行为习惯**：通过金币奖惩，激励用户养成良好习惯
3. **提高执行力**：通过进度检查，防止中途摸鱼
4. **数据真实性**：确保成长数据和统计报告的准确性

### 最佳实践

1. **合理设置验证要求**：
   - 要求应该明确、可验证
   - 不要过于苛刻，避免用户抵触
   - 根据任务类型选择合适的验证方式

2. **选择合适的难度**：
   - 新手建议从低难度开始
   - 逐步提高难度，培养自律习惯
   - 严重拖延症患者可选择高难度

3. **合理使用进度检查**：
   - 长时间任务（>60分钟）建议启用
   - 容易分心的任务建议启用
   - 短时间任务（<30分钟）可不启用

4. **及时完成验证**：
   - 避免超时导致金币惩罚
   - 准备好验证证据再开始任务
   - 设置提醒避免忘记验证

---

## 技术实现参考

### 数据结构

```typescript
// 任务类型定义
interface Task {
  // ... 其他字段
  
  // 验证配置
  verificationStart?: VerificationConfig;
  verificationComplete?: VerificationConfig;
  enableProgressCheck: boolean;
  progressChecks: ProgressCheck[];
  penaltyGold: number;
  
  // 状态
  status: TaskStatus; // 包含验证相关状态
}

// 验证配置
interface VerificationConfig {
  type: 'photo' | 'upload' | 'file';
  requirement: string;
  timeout: number;
  acceptedFileTypes?: string[];
  maxFileSize?: number;
}

// 进度检查记录
interface ProgressCheck {
  checkTime: Date;
  passed: boolean;
  evidence?: string;
  notes?: string;
}

// 任务状态
type TaskStatus = 
  | 'pending'              // 待开始
  | 'scheduled'            // 已安排
  | 'waiting_start'        // 等待开始
  | 'verifying_start'      // 验证开始中
  | 'in_progress'          // 执行中
  | 'verifying_complete'   // 验证完成中
  | 'completed'            // 已完成
  | 'failed'               // 失败
  | 'cancelled';           // 已取消
```

### AI验证API

```typescript
// 图片验证
await aiService.verifyTaskImage(
  imageBase64: string,
  requirement: string,
  taskTitle: string
): Promise<{
  success: boolean;
  isValid: boolean;
  confidence: number;
  reason?: string;
  error?: string;
}>

// 文件验证
await aiService.verifyTaskFile(
  fileName: string,
  fileSize: number,
  fileType: string,
  requirement: string,
  taskTitle: string
): Promise<{
  success: boolean;
  isValid: boolean;
  confidence: number;
  reason?: string;
  error?: string;
}>
```

---

**文档版本**：v1.0  
**最后更新**：2026-02-09  
**作者**：ManifestOS Team

