# 模块一：动态用户画像系统（"我了解的你"）

## 📋 功能概述

这是一个动态成长的用户画像系统，会随着用户使用天数的增加（从第1天到第180天+）不断深化对用户的了解，包括性格、习惯、工作方式、情绪模式、优缺点等。

## 🎯 核心特性

### 1. 动态了解度系统
- **了解度计算**：0-100%，基于使用天数、数据完整度、行为模式识别等多维度计算
- **六大阶段**：
  - 初识阶段（0-10%）
  - 熟悉阶段（11-30%）
  - 了解阶段（31-50%）
  - 深度了解阶段（51-70%）
  - 知心阶段（71-90%）
  - 灵魂伴侣阶段（91-100%）

### 2. 用户画像内容
- **性格特征**：工作风格、情绪类型、社交模式、决策风格
- **行为模式**：时间模式、情绪模式、工作模式、习惯模式
- **目标体系**：核心目标、深层动机、价值观、信念
- **优势与挑战**：识别用户的天赋、技能、品质以及需要改进的地方
- **AI观察**：AI的观察记录、洞察、担忧
- **成长轨迹**：记录用户的成长历程

### 3. 渐进式内容展示
根据使用天数展示不同深度的内容：
- **第1天**：基础信息、初步观察、猜测、期待
- **第10天**：性格特征初步识别、目标分析
- **第30天**：深度画像、性格全景、行为模式
- **第90天**：完整画像、深度洞察、羁绊建立
- **第180天+**：灵魂伴侣级别的深度理解

## 📁 文件结构

```
src/
├── services/
│   └── userProfileService.ts          # 用户画像服务（核心逻辑）
├── stores/
│   ├── userProfileStore.ts            # 用户画像状态管理
│   └── badHabitStore.ts               # 坏习惯数据管理
├── components/
│   └── profile/
│       └── UserProfileModal.tsx       # 用户画像展示组件
└── components/
    ├── layout/
    │   └── MobileLayout.tsx           # 手机端布局（已添加入口）
    └── dashboard/
        └── CustomizableDashboard.tsx  # 电脑端仪表盘（已添加入口）
```

## 🚀 使用方式

### 手机端
在手机端顶部右上角，点击 **💕** 按钮即可打开用户画像。

### 电脑端
在电脑端顶部状态栏，点击 **"我了解的你"** 按钮即可打开用户画像。

## 🔧 技术实现

### 1. 数据存储
- 使用 `localStorage` 存储用户画像数据
- 使用 Zustand 进行状态管理
- 支持数据持久化和自动恢复

### 2. 了解度计算算法

```typescript
了解度 = 基础了解度(0-40%) + 深度了解度(0-40%) + 时间加成(0-20%)

基础了解度：
- 使用天数：每天+0.5%，最高20%
- 数据完整度：标签数据+5%、情绪记录+5%、目标数据+5%、副业数据+5%

深度了解度：
- 识别出3+个行为模式：+10%
- 识别出5+个性格特征：+10%
- 识别出习惯模式：+10%
- 识别出深层动机：+10%

时间加成：
- 使用7天：+5%
- 使用30天：+10%
- 使用90天：+15%
- 使用180天：+20%
```

### 3. 数据来源
- **任务数据**：从 taskStore 获取
- **目标数据**：从 goalStore 获取
- **记忆数据**：从 memoryStore 获取
- **副业数据**：从 sideHustleStore 获取
- **坏习惯数据**：从 badHabitStore 获取
- **标签数据**：从 tagStore 获取

### 4. AI 分析（待实现）
目前使用规则引擎进行分析，后续可以接入 AI 进行更深度的分析：
- 性格特征识别
- 行为模式分析
- 情绪模式识别
- 优势与挑战诊断
- 个性化建议生成

## 🎨 UI 设计

### 主题适配
- 自动适配深色/浅色主题
- 使用渐变色和卡片设计
- 温暖的配色方案（粉色、紫色系）

### 交互设计
- 点击按钮打开弹窗
- 支持刷新更新画像
- 流畅的动画过渡
- 响应式布局

### 视觉元素
- 💕 主图标：代表关爱和陪伴
- ⭐ 星级显示：直观展示了解度
- 📝 📊 💭 等表情符号：增加亲和力
- 渐变背景：营造温暖氛围

## 📊 数据结构

### UserProfile
```typescript
interface UserProfile {
  userId: string;
  createdAt: string;
  lastUpdated: string;
  usageDays: number;
  understandingLevel: number; // 0-100
  understandingStage: string;
  
  personality: {
    traits: string[];
    workStyle: string;
    emotionType: string;
    socialPattern: string;
    decisionStyle: string;
  };
  
  patterns: {
    timePatterns: TimePattern[];
    emotionPatterns: EmotionPattern[];
    workPatterns: WorkPattern[];
    habitPatterns: HabitPattern[];
  };
  
  goals: {
    coreGoals: string[];
    motivations: string[];
    values: string[];
    beliefs: string[];
  };
  
  strengths: Strength[];
  challenges: Challenge[];
  observations: string[];
  insights: string[];
  concerns: string[];
  growthHistory: GrowthRecord[];
}
```

## 🔄 更新机制

### 自动更新
- 每次打开画像时自动更新
- 重新计算了解度
- 分析最新数据

### 手动更新
- 点击刷新按钮手动更新
- 显示更新动画

## 🎯 后续优化方向

1. **AI 深度分析**
   - 接入 GPT-4 进行性格分析
   - 生成个性化的观察和建议
   - 识别更复杂的行为模式

2. **可视化增强**
   - 添加成长曲线图
   - 行为模式热力图
   - 情绪波动图表

3. **互动功能**
   - 用户可以反馈 AI 的观察是否准确
   - 用户可以添加自我评价
   - AI 根据反馈调整分析

4. **导出功能**
   - 导出用户画像报告
   - 生成成长总结
   - 分享功能

5. **隐私保护**
   - 数据加密存储
   - 支持数据导出和删除
   - 隐私设置选项

## 💡 使用建议

1. **坚持使用**：系统需要时间来了解你，建议每天使用
2. **完整记录**：记录更多数据（任务、情绪、目标等）可以提高了解度
3. **定期查看**：每周查看一次画像，了解自己的变化
4. **反思成长**：结合画像进行自我反思和改进

## 🐛 已知问题

- [ ] AI 分析功能尚未完全实现（目前使用规则引擎）
- [ ] 部分数据源尚未接入（如情绪记录）
- [ ] 可视化图表待开发

## 📝 更新日志

### v1.0.0 (2024-02-07)
- ✅ 完成基础架构
- ✅ 实现了解度计算
- ✅ 创建用户画像展示组件
- ✅ 添加手机端和电脑端入口
- ✅ 实现第1天、第10天、第30天、第90天的内容展示
- ✅ 创建 badHabitStore 数据管理

---

**开发者**: AI Assistant  
**设计理念**: 让 AI 成为真正懂你的陪伴者，而不仅仅是一个工具  
**核心价值**: 温暖、真诚、陪伴、成长

