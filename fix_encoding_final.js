const fs = require('fs');
const path = require('path');

const filePath = 'src/components/calendar/NewTimelineView.tsx';

// 读取文件
let content = fs.readFileSync(filePath, 'utf8');

// 定义所有需要替换的乱码映射
const replacements = {
  // 已修复的
  '已启动标��?': '已启动标识',
  '��?已启��?': '✓ 已启动',
  '������...': '进行中...',
  'չ�����������������ļ�': '展开区域：子任务和文件',
  '��Ƭ��������ʾ��Ƭ����': '照片任务：显示照片网格',
  '������֤����': '拍照验证启动',
  '��ʼ����': '开始任务',
  
  // 其他常见乱码
  '��ɻ���': '完成划线',
  '��֤�����ֲ�': '验证中遮罩层',
  '���ڽ���': '正在进行',
  'AI����ʶ��ͼƬ����': 'AI正在识别图片内容',
  '������Ƭ����': '正常卡片内容',
  '���ڷǵ���ʱ״̬��ʾ': '仅在非倒计时状态显示',
  'δչ��': '未展开',
  '��ק�ֱ�': '拖拽手柄',
  '�༭��ť': '编辑按钮',
  'Բ��ͼƬ': '圆形图片',
  '����ϴ���Ƭ': '点击上传照片',
  '֧�ֶ�ѡ': '支持多选',
  '�ϴ���': '上传中',
  '״ָ̬ʾ��': '状态指示器',
  '��Ƭ���������': '照片任务进度条',
  'AI���������': 'AI拆解子任务',
  '����': '启用',
  '�༭��֤': '编辑验证',
  '�ؼ���': '关键词',
  '����������֤': '启用智能验证',
  '�ʼǺ͸���': '笔记和附件',
  'չ�����': '展开区域',
  '��������': '子任务',
  '��Ƭ����': '照片任务',
  '��ʾ��Ƭ����': '显示照片网格',
  '�����ѹ�ȥ': '今日已过去',
  '�����ѹ�ȥ��ʾ': '今日已过去提示',
  '���ʱ�����': '左侧时间对齐',
  '�����ѹ�ȥ��ť': '今日已过去按钮',
  '�����Ѿ���ȥ��': '今天已经过去了',
  'Сʱ': '小时',
  '����': '分钟',
  '��ףЧ��': '庆祝效果',
  'NOWʱ����': 'NOW时间线',
  '��֤�ؼ��ʱ༭�Ի���': '验证关键词编辑对话框',
  '�༭���񵯴�': '编辑任务弹窗',
  '�����༭����': '完整编辑功能',
  '��ʼ���༭����': '初始化编辑数据',
  '�༭����': '编辑任务',
  '�������': '任务标题',
  '��������': '任务描述',
  '��ϸ�����������': '详细描述任务内容...',
  'ʱ���ʱ��': '时间和时长',
  '��ʼʱ��': '开始时间',
  'ʱ�������ӣ�': '时长（分钟）',
  '��ҽ���': '金币奖励',
  '��ǩ': '标签',
  '�����±�ǩ': '输入新标签',
  '���ӱ�ǩ': '添加标签',
  '����Ŀ��': '关联目标',
  '���磺����5w�����100��': '例如：月入5w、坚持100天',
  'λ��': '位置',
  '���磺���������ҡ��칫��': '例如：厨房、卧室、办公室',
  '��Ƭ': '照片',
  'ɾ��': '删除',
  'ȡ��': '取消',
  '����': '保存',
  'ȷ��Ҫɾ�����������': '确定要删除这个任务吗',
  '������': '新任务',
  '���������': '添加任务',
  '�����û������': '今天还没有任务',
  '�����·���ť���ӵ�һ������': '点击下方按钮添加第一个任务',
  '������': '间隔',
  '�����������ʣ��ʱ��': '今日结束剩余时间',
  '�����������': '今日结束还剩',
};

// 执行替换
let modified = false;
for (const [oldText, newText] of Object.entries(replacements)) {
  if (content.includes(oldText)) {
    content = content.split(oldText).join(newText);
    console.log(`替换: ${oldText.substring(0, 20)}... -> ${newText}`);
    modified = true;
  }
}

if (modified) {
  // 保存文件
  fs.writeFileSync(filePath, content, 'utf8');
  console.log('\n✓ 文件已修复并保存');
} else {
  console.log('未找到需要替换的乱码');
}

