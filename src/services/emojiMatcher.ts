/**
 * Emoji æ™ºèƒ½åŒ¹é…æœåŠ¡
 * æ ¹æ®æ ‡ç­¾åç§°çš„è¯­ä¹‰è‡ªåŠ¨åŒ¹é…åˆé€‚çš„ emoji
 */

export class EmojiMatcher {
  // Emoji æ˜ å°„è¡¨ - æŒ‰è¯­ä¹‰åˆ†ç±»
  private static emojiMap: Record<string, string[]> = {
    // å·¥ä½œç›¸å…³
    'å·¥ä½œ': ['ğŸ’¼', 'ğŸ‘”', 'ğŸ“Š', 'ğŸ’»'],
    'ä¼šè®®': ['ğŸ“Š', 'ğŸ‘¥', 'ğŸ¤', 'ğŸ’¬'],
    'ç¼–ç¨‹': ['ğŸ’»', 'âŒ¨ï¸', 'ğŸ–¥ï¸', 'ğŸ‘¨â€ğŸ’»'],
    'å¼€å‘': ['âš™ï¸', 'ğŸ”§', 'ğŸ› ï¸', 'ğŸ’»'],
    'è®¾è®¡': ['ğŸ¨', 'âœï¸', 'ğŸ–Œï¸', 'ğŸ­'],
    'æ–‡æ¡£': ['ğŸ“„', 'ğŸ“', 'ğŸ“‹', 'ğŸ“‘'],
    'é¡¹ç›®': ['ğŸ“', 'ğŸ—‚ï¸', 'ğŸ“Š', 'ğŸ¯'],
    'ä»£ç ': ['ğŸ’»', 'âŒ¨ï¸', 'ğŸ–¥ï¸', 'ğŸ“Ÿ'],
    
    // å­¦ä¹ æˆé•¿
    'å­¦ä¹ ': ['ğŸ“š', 'ğŸ“–', 'âœï¸', 'ğŸ“'],
    'é˜…è¯»': ['ğŸ“–', 'ğŸ“š', 'ğŸ“•', 'ğŸ“˜'],
    'è¯¾ç¨‹': ['ğŸ“', 'ğŸ‘¨â€ğŸ“', 'ğŸ“š', 'ğŸ«'],
    'æˆé•¿': ['ğŸŒ±', 'ğŸŒ¿', 'ğŸŒ³', 'ğŸ“ˆ'],
    'ç¬”è®°': ['ğŸ“', 'âœï¸', 'ğŸ““', 'ğŸ“”'],
    'ç ”ç©¶': ['ğŸ”¬', 'ğŸ”', 'ğŸ“Š', 'ğŸ§ª'],
    
    // åˆ›ä½œç›¸å…³
    'åˆ›ä½œ': ['âœï¸', 'ğŸ¨', 'âœ¨', 'ğŸ’«'],
    'å†™ä½œ': ['âœï¸', 'ğŸ“', 'âœ’ï¸', 'ğŸ–Šï¸'],
    'ç»˜ç”»': ['ğŸ¨', 'ğŸ–Œï¸', 'ğŸ–ï¸', 'ğŸ­'],
    'æ’ç”»': ['ğŸ¨', 'âœï¸', 'ğŸ–¼ï¸', 'ğŸ–Œï¸'],
    'æ‹æ‘„': ['ğŸ“·', 'ğŸ“¸', 'ğŸ¥', 'ğŸ“¹'],
    'è§†é¢‘': ['ğŸ¥', 'ğŸ“¹', 'ğŸ¬', 'ğŸï¸'],
    'ä¿®å›¾': ['ğŸ–¼ï¸', 'âœ¨', 'ğŸ¨', 'ğŸ“¸'],
    'ç…§ç›¸': ['ğŸ“·', 'ğŸ“¸', 'ğŸï¸', 'ğŸ“¹'],
    
    // ç”Ÿæ´»æ—¥å¸¸
    'ç”Ÿæ´»': ['ğŸ ', 'ğŸŒŸ', 'âœ¨', 'ğŸŒˆ'],
    'æ—¥å¸¸': ['ğŸ“', 'ğŸ ', 'â˜€ï¸', 'ğŸŒ™'],
    'å®¶åŠ¡': ['ğŸ§¹', 'ğŸ§½', 'ğŸ§º', 'ğŸª£'],
    'æ‰“æ‰«': ['ğŸ§¹', 'âœ¨', 'ğŸ§½', 'ğŸª£'],
    'æ¸…æ´': ['âœ¨', 'ğŸ§¹', 'ğŸ§¼', 'ğŸ§½'],
    'æ•´ç†': ['ğŸ“¦', 'ğŸ—‚ï¸', 'ğŸ“', 'ğŸ§º'],
    'æ”¶çº³': ['ğŸ“¦', 'ğŸ—ƒï¸', 'ğŸ—‚ï¸', 'ğŸ“'],
    'æ´—è¡£': ['ğŸ‘•', 'ğŸ§º', 'ğŸ§¼', 'ğŸ’§'],
    'åšé¥­': ['ğŸ³', 'ğŸ‘¨â€ğŸ³', 'ğŸ¥˜', 'ğŸ²'],
    'è´­ç‰©': ['ğŸ›’', 'ğŸ›ï¸', 'ğŸ’³', 'ğŸª'],
    'æ´—æ¼±': ['ğŸš¿', 'ğŸ§¼', 'ğŸª¥', 'ğŸ’§'],
    
    // å¥åº·è¿åŠ¨
    'å¥åº·': ['ğŸ’ª', 'â¤ï¸', 'ğŸ¥', 'ğŸ’Š'],
    'è¿åŠ¨': ['ğŸƒ', 'âš½', 'ğŸ‹ï¸', 'ğŸ¤¸'],
    'å¥èº«': ['ğŸ’ª', 'ğŸ‹ï¸', 'ğŸ¤¸', 'ğŸƒ'],
    'è·‘æ­¥': ['ğŸƒ', 'ğŸ‘Ÿ', 'ğŸƒâ€â™€ï¸', 'ğŸƒâ€â™‚ï¸'],
    'ç‘œä¼½': ['ğŸ§˜', 'ğŸ§˜â€â™€ï¸', 'ğŸ§˜â€â™‚ï¸', 'ğŸ•‰ï¸'],
    'é”»ç‚¼': ['ğŸ’ª', 'ğŸ‹ï¸', 'ğŸ¤¸', 'ğŸƒ'],
    'ä½“æ£€': ['ğŸ¥', 'ğŸ’‰', 'ğŸ©º', 'â¤ï¸'],
    'åƒè¯': ['ğŸ’Š', 'ğŸ’‰', 'ğŸ¥', 'ğŸ©º'],
    
    // ç¤¾äº¤å¨±ä¹
    'ç¤¾äº¤': ['ğŸ‘¥', 'ğŸ¤', 'ğŸ’¬', 'ğŸ—£ï¸'],
    'æœ‹å‹': ['ğŸ¤', 'ğŸ‘«', 'ğŸ‘¬', 'ğŸ‘­'],
    'èšä¼š': ['ğŸ‰', 'ğŸŠ', 'ğŸ¥³', 'ğŸ»'],
    'å¨±ä¹': ['ğŸ®', 'ğŸ¯', 'ğŸ²', 'ğŸª'],
    'æ¸¸æˆ': ['ğŸ®', 'ğŸ¯', 'ğŸ•¹ï¸', 'ğŸ²'],
    'ç”µå½±': ['ğŸ¬', 'ğŸ¥', 'ğŸ¿', 'ğŸï¸'],
    'éŸ³ä¹': ['ğŸµ', 'ğŸ¶', 'ğŸ¸', 'ğŸ¹'],
    'æ—…è¡Œ': ['âœˆï¸', 'ğŸŒ', 'ğŸ—ºï¸', 'ğŸ§³'],
    'ç¾é£Ÿ': ['ğŸ½ï¸', 'ğŸ´', 'ğŸ˜‹', 'ğŸœ'],
    
    // ç¾å®¹æŠ¤ç†
    'æŠ¤è‚¤': ['ğŸ’„', 'âœ¨', 'ğŸ§´', 'ğŸ’…'],
    'åŒ–å¦†': ['ğŸ’„', 'ğŸ’…', 'âœ¨', 'ğŸ‘„'],
    'ç©¿æ­': ['ğŸ‘—', 'ğŸ‘”', 'ğŸ‘ ', 'ğŸ‘œ'],
    'ç¾å®¹': ['ğŸ’…', 'ğŸ’„', 'âœ¨', 'ğŸŒ¸'],
    
    // å‰¯ä¸šåˆ›ä¸š
    'å‰¯ä¸š': ['ğŸ’¡', 'ğŸš€', 'ğŸ’°', 'ğŸ“ˆ'],
    'åˆ›ä¸š': ['ğŸš€', 'ğŸ’¡', 'ğŸ“ˆ', 'ğŸ’¼'],
    'æ€è€ƒ': ['ğŸ¤”', 'ğŸ’­', 'ğŸ’¡', 'ğŸ§ '],
    'è®¡åˆ’': ['ğŸ“‹', 'ğŸ“', 'ğŸ¯', 'ğŸ“Š'],
    'å‡†å¤‡': ['ğŸ“¦', 'ğŸ¯', 'âœ…', 'ğŸ“‹'],
    'è°ƒç ”': ['ğŸ”', 'ğŸ“Š', 'ğŸ“ˆ', 'ğŸ”¬'],
    
    // ç¡çœ ä¼‘æ¯
    'ç¡è§‰': ['ğŸ˜´', 'ğŸ›Œ', 'ğŸ’¤', 'ğŸŒ™'],
    'åˆä¼‘': ['ğŸ˜´', 'ğŸ’¤', 'ğŸ›‹ï¸', 'â˜€ï¸'],
    'ä¼‘æ¯': ['ğŸ˜´', 'ğŸ›‹ï¸', 'â˜•', 'ğŸŒ™'],
    'ç¡çœ ': ['ğŸ˜´', 'ğŸ›Œ', 'ğŸ’¤', 'ğŸŒ™'],
    'æ”¾æ¾': ['ğŸ˜Œ', 'ğŸ§˜', 'â˜•', 'ğŸ›‹ï¸'],
    
    // AI ç›¸å…³
    'AI': ['ğŸ¤–', 'ğŸ§ ', 'ğŸ’»', 'âš¡'],
    'äººå·¥æ™ºèƒ½': ['ğŸ¤–', 'ğŸ§ ', 'ğŸ’¡', 'âš¡'],
    'ChatGPT': ['ğŸ¤–', 'ğŸ’¬', 'ğŸ§ ', 'âœ¨'],
    
    // è´¢åŠ¡ç›¸å…³
    'ç†è´¢': ['ğŸ’°', 'ğŸ’µ', 'ğŸ’³', 'ğŸ“Š'],
    'æŠ•èµ„': ['ğŸ“ˆ', 'ğŸ’°', 'ğŸ’µ', 'ğŸ“Š'],
    'æ”¶å…¥': ['ğŸ’°', 'ğŸ’µ', 'ğŸ’´', 'ğŸ’¶'],
    'æ”¯å‡º': ['ğŸ’¸', 'ğŸ’³', 'ğŸ›’', 'ğŸ’°'],
    
    // å®¶åº­ç›¸å…³
    'å®¶äºº': ['ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', 'â¤ï¸', 'ğŸ '],
    'çˆ¶æ¯': ['ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'â¤ï¸', 'ğŸ ', 'ğŸ‘´'],
    'å­©å­': ['ğŸ‘¶', 'ğŸ‘§', 'ğŸ‘¦', 'ğŸ¼'],
    'å®¶åº­': ['ğŸ ', 'â¤ï¸', 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'ğŸ¡'],
    
    // æƒ…ç»ªç›¸å…³
    'å¼€å¿ƒ': ['ğŸ˜Š', 'ğŸ˜„', 'ğŸ˜', 'ğŸ¥°'],
    'å¿«ä¹': ['ğŸ˜„', 'ğŸ˜Š', 'ğŸ¥³', 'ğŸ‰'],
    'å…´å¥‹': ['ğŸ¤©', 'ğŸ˜†', 'ğŸ¥³', 'ğŸ‰'],
    'å¹³é™': ['ğŸ˜Œ', 'ğŸ˜‡', 'ğŸ§˜', 'â˜®ï¸'],
    'æ„Ÿæ©': ['ğŸ™', 'â¤ï¸', 'ğŸ’–', 'âœ¨'],
    'ç„¦è™‘': ['ğŸ˜°', 'ğŸ˜Ÿ', 'ğŸ˜¥', 'ğŸ˜“'],
    'éš¾è¿‡': ['ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜”', 'ğŸ’”'],
    'ç”Ÿæ°”': ['ğŸ˜ ', 'ğŸ˜¡', 'ğŸ’¢', 'ğŸ˜¤'],
    'ç–²æƒ«': ['ğŸ˜´', 'ğŸ˜ª', 'ğŸ¥±', 'ğŸ’¤'],
    
    // å…¶ä»–å¸¸ç”¨
    'é‡è¦': ['â­', 'ğŸŒŸ', 'âœ¨', 'ğŸ’«'],
    'ç´§æ€¥': ['ğŸ”¥', 'âš¡', 'ğŸš¨', 'â°'],
    'å®Œæˆ': ['âœ…', 'âœ”ï¸', 'ğŸ‰', 'ğŸ‘'],
    'ç›®æ ‡': ['ğŸ¯', 'ğŸ†', 'ğŸ¥‡', 'â­'],
  };

  /**
   * æ ¹æ®æ ‡ç­¾åç§°æ™ºèƒ½åŒ¹é… emoji
   * @param tagName æ ‡ç­¾åç§°
   * @returns åŒ¹é…çš„ emojiï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ™è¿”å›é»˜è®¤ emoji
   */
  static matchEmoji(tagName: string): string {
    // 1. ç²¾ç¡®åŒ¹é…
    if (this.emojiMap[tagName]) {
      return this.emojiMap[tagName][0];
    }

    // 2. æ¨¡ç³ŠåŒ¹é… - æ£€æŸ¥æ ‡ç­¾åç§°æ˜¯å¦åŒ…å«å…³é”®è¯
    for (const [keyword, emojis] of Object.entries(this.emojiMap)) {
      if (tagName.includes(keyword)) {
        return emojis[0];
      }
    }

    // 3. åå‘åŒ¹é… - æ£€æŸ¥å…³é”®è¯æ˜¯å¦åŒ…å«åœ¨æ ‡ç­¾åç§°ä¸­
    for (const [keyword, emojis] of Object.entries(this.emojiMap)) {
      if (keyword.includes(tagName) && tagName.length >= 2) {
        return emojis[0];
      }
    }

    // 4. é»˜è®¤ emoji
    return 'ğŸ·ï¸';
  }

  /**
   * è·å–æ ‡ç­¾çš„æ‰€æœ‰å€™é€‰ emoji
   * @param tagName æ ‡ç­¾åç§°
   * @returns emoji æ•°ç»„
   */
  static getCandidateEmojis(tagName: string): string[] {
    const candidates: string[] = [];

    // ç²¾ç¡®åŒ¹é…
    if (this.emojiMap[tagName]) {
      candidates.push(...this.emojiMap[tagName]);
    }

    // æ¨¡ç³ŠåŒ¹é…
    for (const [keyword, emojis] of Object.entries(this.emojiMap)) {
      if (tagName.includes(keyword) && !candidates.includes(emojis[0])) {
        candidates.push(...emojis);
      }
    }

    // å¦‚æœæ²¡æœ‰å€™é€‰ï¼Œè¿”å›é»˜è®¤
    if (candidates.length === 0) {
      candidates.push('ğŸ·ï¸', 'ğŸ“Œ', 'ğŸ”–', 'âœ¨');
    }

    // å»é‡å¹¶é™åˆ¶æ•°é‡
    return [...new Set(candidates)].slice(0, 8);
  }

  /**
   * æ‰¹é‡ä¸ºæ ‡ç­¾åŒ¹é… emoji
   * @param tagNames æ ‡ç­¾åç§°æ•°ç»„
   * @returns æ ‡ç­¾åç§°åˆ° emoji çš„æ˜ å°„
   */
  static batchMatchEmojis(tagNames: string[]): Record<string, string> {
    const result: Record<string, string> = {};
    
    tagNames.forEach(tagName => {
      result[tagName] = this.matchEmoji(tagName);
    });

    return result;
  }

  /**
   * æ ¹æ®æ ‡ç­¾ç±»å‹æ¨è emoji
   * @param tagType æ ‡ç­¾ç±»å‹ï¼ˆwork, life, health, social, hobby, etc.ï¼‰
   * @returns æ¨èçš„ emoji åˆ—è¡¨
   */
  static recommendByType(tagType: string): string[] {
    const typeMap: Record<string, string[]> = {
      work: ['ğŸ’¼', 'ğŸ‘”', 'ğŸ“Š', 'ğŸ’»', 'âš™ï¸', 'ğŸ“„'],
      life: ['ğŸ ', 'ğŸŒŸ', 'âœ¨', 'ğŸŒˆ', 'ğŸ“', 'â˜€ï¸'],
      health: ['ğŸ’ª', 'â¤ï¸', 'ğŸ¥', 'ğŸƒ', 'ğŸ§˜', 'ğŸ’Š'],
      social: ['ğŸ‘¥', 'ğŸ¤', 'ğŸ’¬', 'ğŸ—£ï¸', 'ğŸ‰', 'ğŸ»'],
      hobby: ['ğŸ®', 'ğŸ¨', 'ğŸµ', 'ğŸ“š', 'ğŸ¬', 'âœˆï¸'],
      study: ['ğŸ“š', 'ğŸ“–', 'âœï¸', 'ğŸ“', 'ğŸŒ±', 'ğŸ§ '],
      creative: ['ğŸ¨', 'âœï¸', 'ğŸ“·', 'ğŸ¥', 'ğŸ–Œï¸', 'âœ¨'],
      finance: ['ğŸ’°', 'ğŸ’µ', 'ğŸ’³', 'ğŸ“Š', 'ğŸ“ˆ', 'ğŸ’¸'],
      family: ['ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'â¤ï¸', 'ğŸ ', 'ğŸ‘¶', 'ğŸ‘´', 'ğŸ¡'],
    };

    return typeMap[tagType] || ['ğŸ·ï¸', 'ğŸ“Œ', 'ğŸ”–', 'âœ¨'];
  }
}

