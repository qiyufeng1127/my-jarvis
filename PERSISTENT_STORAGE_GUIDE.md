# 本地数据持久化 - 快速使用指南

## 🎯 核心功能

本次更新彻底解决了数据丢失问题！现在您可以：

✅ **刷新页面** - 数据不丢失  
✅ **网站更新** - 数据不丢失  
✅ **重启浏览器** - 数据不丢失  
✅ **添加到桌面** - 数据不丢失  

---

## 🚀 快速开始

### 1. 首次使用

打开网站后，系统会自动：
- 生成您的设备唯一ID
- 创建默认头像和设备名称
- 初始化数据存储

**无需任何操作，立即可用！**

---

### 2. 查看设备信息

进入 **设置页面**，您可以看到：

```
📱 设备信息
├── 🦊 设备头像（可点击更换）
├── 我的手机 (Safari)（可编辑）
├── DEVICE-A1B2C3D4（设备唯一ID）
├── 创建时间：2024-02-06 12:00:00
└── 最后访问：2024-02-06 12:30:00
```

---

### 3. 自定义设备

#### 更换头像
1. 点击设备头像
2. 从40个Emoji中选择
3. 自动保存

#### 修改名称
1. 点击设备名称旁的编辑按钮 ✏️
2. 输入新名称
3. 点击 ✓ 保存

---

### 4. 数据管理

#### 📊 查看存储使用情况
```
已使用：0.5 MB / 5 MB
进度条：[████░░░░░░] 10%
```

#### 💾 导出数据（备份）
1. 点击"导出所有数据"按钮
2. 自动下载JSON文件
3. 文件名：`manifestos-backup-2024-02-06.json`

#### 📥 导入数据（恢复）
1. 点击"导入数据"按钮
2. 选择备份文件
3. 确认导入
4. 自动刷新页面

#### 🗑️ 清除所有数据
1. 点击"清除所有本地数据"按钮
2. 确认操作（会列出将被删除的内容）
3. 数据清除
4. 3秒后自动刷新

---

## 💡 常见问题

### Q1: 为什么需要设备ID？
**A:** 设备ID用于绑定您的数据，确保刷新页面或更新版本后数据不丢失。

### Q2: 设备ID会变吗？
**A:** 不会！只要您使用同一设备同一浏览器，设备ID永久不变。

### Q3: 数据存储在哪里？
**A:** 数据存储在您的设备本地（localStorage），不上传到服务器，完全私密。

### Q4: 不同浏览器的数据互通吗？
**A:** 不互通。不同浏览器会生成不同的设备ID，数据完全隔离。如需同步，可以使用"导出/导入"功能。

### Q5: 手机和电脑的数据互通吗？
**A:** 不互通。不同设备会生成不同的设备ID，数据完全隔离。如需同步，可以使用"导出/导入"功能。

### Q6: 数据会丢失吗？
**A:** 不会！除非您手动点击"清除所有数据"，否则数据永久保留。

### Q7: 存储空间有限制吗？
**A:** localStorage 通常限制为 5-10MB，足够存储大量任务和配置。

### Q8: 如何跨设备同步数据？
**A:** 
1. 在设备A上点击"导出所有数据"
2. 将文件传输到设备B（如通过邮件、云盘）
3. 在设备B上点击"导入数据"，选择文件
4. 完成同步

---

## 🎨 使用场景

### 场景1：日常使用
```
1. 打开网站
2. 添加任务到时间轴
3. 使用收集箱记录想法
4. 配置标签和目标
5. 关闭浏览器

第二天：
1. 打开网站
2. 所有数据完整保留 ✅
```

### 场景2：网站更新
```
1. 开发者发布新版本
2. 您刷新页面
3. 浏览器加载新代码
4. 系统自动迁移数据
5. 所有数据完整保留 ✅
```

### 场景3：更换设备
```
设备A（旧手机）：
1. 进入设置页面
2. 点击"导出所有数据"
3. 下载备份文件

设备B（新手机）：
1. 打开网站
2. 进入设置页面
3. 点击"导入数据"
4. 选择备份文件
5. 数据完整恢复 ✅
```

### 场景4：添加到桌面
```
1. 在手机浏览器中打开网站
2. 点击"添加到主屏幕"
3. 从桌面图标打开
4. 所有数据完整保留 ✅
```

---

## ⚠️ 注意事项

### 1. 清除浏览器数据
如果您在浏览器设置中清除了"网站数据"或"Cookie和网站数据"，本地数据会被删除。建议定期导出备份。

### 2. 隐私模式
在浏览器的隐私模式（无痕模式）下，数据不会持久化保存。关闭隐私窗口后数据会丢失。

### 3. 存储空间
如果存储空间不足（超过5MB），可能无法保存新数据。建议定期清理不需要的数据。

### 4. 数据备份
虽然数据会永久保留，但建议定期导出备份，以防意外情况（如设备损坏、浏览器故障等）。

---

## 🔧 技术细节

### 设备ID生成原理
```
收集浏览器指纹：
- User Agent
- 屏幕分辨率
- 时区和语言
- 平台信息
- 硬件信息
- Canvas指纹

↓

生成唯一哈希

↓

设备ID：DEVICE-A1B2C3D4
```

### 数据存储结构
```json
{
  "deviceId": "DEVICE-A1B2C3D4",
  "version": 1,
  "timestamp": 1707123456789,
  "data": {
    // 您的实际数据
  }
}
```

---

## 📞 需要帮助？

如果遇到问题：

1. **检查设备信息**：进入设置页面，确认设备ID已生成
2. **查看存储使用情况**：确认存储空间充足
3. **尝试导出/导入**：测试数据备份功能是否正常
4. **清除并重新开始**：如果数据损坏，可以清除所有数据重新开始

---

## 🎉 开始使用

现在您可以放心地使用网站了！

- ✅ 添加任务到时间轴
- ✅ 使用收集箱记录想法
- ✅ 配置标签和目标
- ✅ 使用AI助手
- ✅ 随时刷新页面

**所有数据都会永久保留！** 🎊






