# ç¬¬ä¸‰é˜¶æ®µå®Œæˆæ–‡æ¡£

## ğŸ‰ å®æ–½æ¦‚è§ˆ

ç¬¬ä¸‰é˜¶æ®µå·²å®Œæˆï¼ŒåŒ…å«ä»¥ä¸‹å››ä¸ªæ ¸å¿ƒç³»ç»Ÿï¼š

### âœ… 1. è™šæ‹Ÿå® ç‰©ç³»ç»Ÿ
### âœ… 2. ä¸“æ³¨æ¨¡å¼ + ç•ªèŒ„é’Ÿ
### âœ… 3. åä¹ æƒ¯çŸ«æ­£ç³»ç»Ÿ
### âœ… 4. æ’è¡Œæ¦œç³»ç»Ÿ

---

## ğŸ“¦ æ–°å¢æ–‡ä»¶æ¸…å•

### Store å±‚ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰

1. **`src/stores/petStore.ts`** - å® ç‰©ç³»ç»Ÿæ ¸å¿ƒçŠ¶æ€
   - å® ç‰©é¢†å…»ã€å–‚é£Ÿã€ç©è€ã€æ²»ç–—
   - å® ç‰©çŠ¶æ€æ›´æ–°ï¼ˆé¥¥é¥¿ã€å¿«ä¹ã€å¥åº·ï¼‰
   - å® ç‰©å‡çº§å’Œç»éªŒç³»ç»Ÿ
   - é‡‘å¸åŠ æˆæœºåˆ¶

2. **`src/stores/focusStore.ts`** - ä¸“æ³¨æ¨¡å¼çŠ¶æ€ç®¡ç†
   - ä¸‰ç§ä¸“æ³¨æ¨¡å¼ï¼šç•ªèŒ„é’Ÿã€æ·±åº¦ä¸“æ³¨ã€å¿ƒæµæ¨¡å¼
   - ç•ªèŒ„é’Ÿè‡ªåŠ¨å¾ªç¯ï¼ˆå·¥ä½œ-ä¼‘æ¯ï¼‰
   - ä¸“æ³¨ä¼šè¯è®°å½•å’Œç»Ÿè®¡
   - é‡‘å¸å’Œç»éªŒå¥–åŠ±

3. **`src/stores/badHabitStore.ts`** - åä¹ æƒ¯è¿½è¸ªç³»ç»Ÿ
   - 7ç§åä¹ æƒ¯ç±»å‹æ£€æµ‹
   - è‡ªåŠ¨æƒ©ç½šæœºåˆ¶ï¼ˆæ‰£é‡‘å¸ï¼‰
   - çŸ«æ­£æŒ‘æˆ˜ç³»ç»Ÿï¼ˆ21å¤©æŒ‘æˆ˜ï¼‰
   - è¶‹åŠ¿åˆ†æï¼ˆæ”¹å–„/ç¨³å®š/æ¶åŒ–ï¼‰

4. **`src/stores/leaderboardStore.ts`** - æ’è¡Œæ¦œå’Œæˆå°±ç³»ç»Ÿ
   - 5ç§æ’è¡Œæ¦œï¼šé‡‘å¸ã€è¿èƒœã€ä¸“æ³¨ã€ä»»åŠ¡ã€å® ç‰©
   - æˆå°±ç³»ç»Ÿï¼ˆ17ä¸ªé¢„è®¾æˆå°±ï¼‰
   - æˆå°±ç¨€æœ‰åº¦åˆ†çº§ï¼ˆæ™®é€š/ç¨€æœ‰/å²è¯—/ä¼ è¯´ï¼‰

### Service å±‚ï¼ˆåå°æœåŠ¡ï¼‰

5. **`src/services/petUpdateService.ts`** - å® ç‰©çŠ¶æ€è‡ªåŠ¨æ›´æ–°
   - æ¯5åˆ†é’Ÿæ›´æ–°å® ç‰©çŠ¶æ€
   - è‡ªåŠ¨è®¡ç®—é¥¥é¥¿ã€å¿«ä¹ã€å¥åº·å€¼è¡°å‡

6. **`src/services/focusTimerService.ts`** - ä¸“æ³¨è®¡æ—¶å™¨æœåŠ¡
   - æ¯ç§’æ›´æ–°ä¸“æ³¨æ—¶é—´
   - è‡ªåŠ¨è§¦å‘é˜¶æ®µåˆ‡æ¢

### Component å±‚ï¼ˆUIç»„ä»¶ï¼‰

7. **`src/components/pet/PetWidget.tsx`** - å® ç‰©å±•ç¤ºç»„ä»¶
   - å® ç‰©çŠ¶æ€å¯è§†åŒ–ï¼ˆå¥åº·ã€é¥¥é¥¿ã€å¿«ä¹ã€ç»éªŒï¼‰
   - å¿«æ·æ“ä½œæŒ‰é’®ï¼ˆå–‚é£Ÿã€ç©è€ã€æ²»ç–—ï¼‰
   - é‡‘å¸åŠ æˆæ˜¾ç¤º

8. **`src/components/pet/PetShop.tsx`** - å® ç‰©å•†åº—
   - å® ç‰©é¢†å…»ï¼ˆ6ç§å® ç‰©ç±»å‹ï¼‰
   - é£Ÿç‰©è´­ä¹°ï¼ˆ4ç§é£Ÿç‰©ï¼‰
   - ç©å…·è´­ä¹°ï¼ˆ3ç§ç©å…·ï¼‰

9. **`src/components/focus/FocusTimer.tsx`** - ä¸“æ³¨è®¡æ—¶å™¨
   - ä¸‰ç§æ¨¡å¼é€‰æ‹©ç•Œé¢
   - å®æ—¶å€’è®¡æ—¶æ˜¾ç¤º
   - æš‚åœ/ç»§ç»­/åœæ­¢æ§åˆ¶
   - ç•ªèŒ„é’Ÿé˜¶æ®µåˆ‡æ¢

10. **`src/components/focus/FocusStatsPanel.tsx`** - ä¸“æ³¨ç»Ÿè®¡é¢æ¿
    - ä»Šæ—¥ä¸“æ³¨è¿›åº¦ï¼ˆç›®æ ‡2å°æ—¶ï¼‰
    - æ€»ç»Ÿè®¡å¡ç‰‡ï¼ˆæ€»æ—¶é•¿ã€å®Œæˆç‡ã€è¿ç»­å¤©æ•°ï¼‰
    - æœ€è¿‘ä¼šè¯åˆ—è¡¨

11. **`src/components/habit/BadHabitTracker.tsx`** - åä¹ æƒ¯è¿½è¸ªå™¨
    - ä»Šæ—¥åä¹ æƒ¯è®°å½•
    - æœ¬å‘¨æœ€ä¸¥é‡ä¹ æƒ¯
    - è¿›è¡Œä¸­çš„çŸ«æ­£æŒ‘æˆ˜
    - å·²å®Œæˆçš„æŒ‘æˆ˜

12. **`src/components/leaderboard/LeaderboardPanel.tsx`** - æ’è¡Œæ¦œé¢æ¿
    - 5ä¸ªæ’è¡Œæ¦œæ ‡ç­¾é¡µ
    - æˆ‘çš„æ’åé«˜äº®æ˜¾ç¤º
    - å‰ä¸‰åç‰¹æ®Šå±•ç¤ºï¼ˆé‡‘é“¶é“œç‰Œï¼‰
    - æˆå°±å±•ç¤ºï¼ˆå·²è§£é”/æœªè§£é”ï¼‰

---

## ğŸ® æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1ï¸âƒ£ è™šæ‹Ÿå® ç‰©ç³»ç»Ÿ

#### å® ç‰©ç±»å‹ï¼ˆ6ç§ï¼‰
| å® ç‰© | ä»·æ ¼ | é‡‘å¸åŠ æˆ | ç‰¹ç‚¹ |
|------|------|----------|------|
| ğŸ¹ ä»“é¼  | 500 | +5% | å…¥é—¨çº§å® ç‰© |
| ğŸ° å…”å­ | 800 | +5% | å¯çˆ±å‹ |
| ğŸ¦ å°é¸Ÿ | 600 | +8% | çµæ´»å‹ |
| ğŸ± å°çŒ« | 1000 | +10% | ç»å…¸é€‰æ‹© |
| ğŸ¶ å°ç‹— | 1000 | +10% | å¿ è¯šä¼™ä¼´ |
| ğŸ‰ ç¥é¾™ | 5000 | +50% | ä¼ è¯´çº§å® ç‰© |

#### å® ç‰©çŠ¶æ€ç³»ç»Ÿ
- **é¥¥é¥¿å€¼**ï¼šæ¯å°æ—¶å‡å°‘10ç‚¹ï¼Œä½äº30è§¦å‘"é¥¥é¥¿"çŠ¶æ€
- **å¿«ä¹å€¼**ï¼šæ¯å°æ—¶å‡å°‘5ç‚¹ï¼Œä½äº30è§¦å‘"éš¾è¿‡"çŠ¶æ€
- **å¥åº·å€¼**ï¼šé¥¥é¥¿æˆ–å¿«ä¹è¿‡ä½æ—¶æ¯æ¬¡å‡å°‘5ç‚¹
- **ç»éªŒå€¼**ï¼šå®Œæˆä¸“æ³¨ä¼šè¯è·å¾—ï¼Œå‡çº§æå‡é‡‘å¸åŠ æˆ

#### å® ç‰©äº’åŠ¨
```typescript
// å–‚é£Ÿï¼ˆ4ç§é£Ÿç‰©ï¼‰
ğŸ– æ™®é€šé£Ÿç‰© - 10é‡‘å¸ - é¥¥é¥¿+30 å¿«ä¹+5
ğŸ— ç¾å‘³é£Ÿç‰© - 20é‡‘å¸ - é¥¥é¥¿+50 å¿«ä¹+10
ğŸ± è±ªåå¤§é¤ - 50é‡‘å¸ - é¥¥é¥¿+80 å¿«ä¹+20
ğŸª é›¶é£Ÿ - 5é‡‘å¸ - é¥¥é¥¿+10 å¿«ä¹+15

// ç©è€ï¼ˆ3ç§ç©å…·ï¼‰
âš½ å°çƒ - 20é‡‘å¸ - å¿«ä¹+10
ğŸ¥ é£ç›˜ - 30é‡‘å¸ - å¿«ä¹+15
ğŸ­ ç©å…·é¼  - 50é‡‘å¸ - å¿«ä¹+20

// æ²»ç–—
ğŸ’Š æ²»ç–— - 100é‡‘å¸ - å¥åº·æ¢å¤è‡³100
```

---

### 2ï¸âƒ£ ä¸“æ³¨æ¨¡å¼ç³»ç»Ÿ

#### ä¸‰ç§ä¸“æ³¨æ¨¡å¼

**ğŸ… ç•ªèŒ„é’Ÿæ¨¡å¼**
- å·¥ä½œæ—¶é•¿ï¼š25åˆ†é’Ÿï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- çŸ­ä¼‘æ¯ï¼š5åˆ†é’Ÿ
- é•¿ä¼‘æ¯ï¼š15åˆ†é’Ÿï¼ˆæ¯4ä¸ªç•ªèŒ„é’Ÿåï¼‰
- è‡ªåŠ¨å¾ªç¯ï¼šå¯è®¾ç½®è‡ªåŠ¨å¼€å§‹ä¸‹ä¸€é˜¶æ®µ

**ğŸ§˜ æ·±åº¦ä¸“æ³¨æ¨¡å¼**
- æ—¶é•¿ï¼š90åˆ†é’Ÿ
- é€‚åˆéœ€è¦é•¿æ—¶é—´é›†ä¸­çš„ä»»åŠ¡
- æ— ä¼‘æ¯é˜¶æ®µ

**ğŸŒŠ å¿ƒæµæ¨¡å¼**
- æ—¶é•¿ï¼š120åˆ†é’Ÿ
- é€‚åˆåˆ›ä½œå‹å·¥ä½œ
- æ²‰æµ¸å¼ä½“éªŒ

#### å¥–åŠ±æœºåˆ¶
```typescript
// å®Œæˆå¥–åŠ±
æ¯åˆ†é’ŸåŸºç¡€å¥–åŠ±ï¼š5é‡‘å¸ + 10ç»éªŒ
å®ŒæˆåŠ æˆï¼š+50%
æ€»å¥–åŠ± = åˆ†é’Ÿæ•° Ã— 5 Ã— 1.5

// ä¸­æ–­æƒ©ç½š
åªè·å¾—50%å¥–åŠ±
æ€»å¥–åŠ± = åˆ†é’Ÿæ•° Ã— 2.5

// å® ç‰©ç»éªŒ
å® ç‰©è·å¾—ä¸ä¸“æ³¨æ—¶é•¿ç›¸å…³çš„ç»éªŒå€¼
```

#### ç•ªèŒ„é’Ÿè®¾ç½®
```typescript
interface PomodoroSettings {
  pomodoroDuration: 25,        // å·¥ä½œæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  shortBreakDuration: 5,       // çŸ­ä¼‘æ¯ï¼ˆåˆ†é’Ÿï¼‰
  longBreakDuration: 15,       // é•¿ä¼‘æ¯ï¼ˆåˆ†é’Ÿï¼‰
  pomodorosBeforeLongBreak: 4, // å‡ ä¸ªç•ªèŒ„é’Ÿåé•¿ä¼‘æ¯
  autoStartBreak: false,       // è‡ªåŠ¨å¼€å§‹ä¼‘æ¯
  autoStartPomodoro: false,    // è‡ªåŠ¨å¼€å§‹ä¸‹ä¸€ä¸ªç•ªèŒ„é’Ÿ
  strictMode: false,           // ä¸¥æ ¼æ¨¡å¼ï¼ˆä¸å…è®¸ä¸­é€”é€€å‡ºï¼‰
}
```

---

### 3ï¸âƒ£ åä¹ æƒ¯çŸ«æ­£ç³»ç»Ÿ

#### 7ç§åä¹ æƒ¯ç±»å‹

| ä¹ æƒ¯ | å›¾æ ‡ | åŸºç¡€æƒ©ç½š | æ£€æµ‹è§„åˆ™ |
|------|------|----------|----------|
| æ‹–å»¶ç—‡ | â° | 50é‡‘å¸ | ä»»åŠ¡è¶…æœŸã€é•¿æ—¶é—´æœªå®Œæˆ |
| åˆ†å¿ƒ | ğŸ“± | 30é‡‘å¸ | ä¸“æ³¨ä¸­é€”é€€å‡ºã€é¢‘ç¹åˆ‡æ¢ä»»åŠ¡ |
| å®Œç¾ä¸»ä¹‰ | ğŸ¯ | 20é‡‘å¸ | ä»»åŠ¡åå¤ä¿®æ”¹ã€è€—æ—¶è¿‡é•¿ |
| å¤šä»»åŠ¡ | ğŸ”€ | 25é‡‘å¸ | åŒæ—¶3ä¸ªä»¥ä¸Šä»»åŠ¡ |
| ç†¬å¤œ | ğŸŒ™ | 40é‡‘å¸ | 23:00åä»åœ¨å·¥ä½œ |
| ä¸ä¼‘æ¯ | ğŸ˜« | 30é‡‘å¸ | è¿ç»­å·¥ä½œè¶…è¿‡2å°æ—¶ |
| è¿‡åº¦æ‰¿è¯º | ğŸ“‹ | 35é‡‘å¸ | å¾…åŠä»»åŠ¡è¶…è¿‡20ä¸ª |

#### ä¸¥é‡ç¨‹åº¦
- **ä½ (low)**ï¼šåŸºç¡€æƒ©ç½š Ã— 1.0
- **ä¸­ (medium)**ï¼šåŸºç¡€æƒ©ç½š Ã— 1.5
- **é«˜ (high)**ï¼šåŸºç¡€æƒ©ç½š Ã— 2.0

#### çŸ«æ­£æŒ‘æˆ˜
```typescript
// 21å¤©æŒ‘æˆ˜
- ç›®æ ‡ï¼šè¿ç»­21å¤©ä¸å‡ºç°è¯¥åä¹ æƒ¯
- å¥–åŠ±ï¼š500é‡‘å¸
- å¤±è´¥ï¼šé‡ç½®è¿›åº¦ï¼Œå¯é‡æ–°å¼€å§‹
- è¶‹åŠ¿åˆ†æï¼šæ”¹å–„ä¸­/ç¨³å®š/æ¶åŒ–
```

#### è‡ªåŠ¨æ£€æµ‹API
```typescript
// æ‹–å»¶æ£€æµ‹
detectProcrastination(taskId, taskName, daysOverdue)

// åˆ†å¿ƒæ£€æµ‹
detectDistraction(reason)

// ç†¬å¤œæ£€æµ‹
detectLateNight()

// è¿‡åº¦æ‰¿è¯ºæ£€æµ‹
detectOvercommit(taskCount)
```

---

### 4ï¸âƒ£ æ’è¡Œæ¦œç³»ç»Ÿ

#### 5ç§æ’è¡Œæ¦œ

1. **ğŸ’° é‡‘å¸æ¦œ** - ç´¯è®¡è·å¾—é‡‘å¸æœ€å¤š
2. **ğŸ”¥ è¿èƒœæ¦œ** - è¿ç»­å®Œæˆå¤©æ•°æœ€å¤š
3. **ğŸ¯ ä¸“æ³¨æ¦œ** - ç´¯è®¡ä¸“æ³¨æ—¶é•¿æœ€é•¿
4. **âœ… ä»»åŠ¡æ¦œ** - å®Œæˆä»»åŠ¡æ•°é‡æœ€å¤š
5. **ğŸ¾ å® ç‰©æ¦œ** - å® ç‰©ç­‰çº§æœ€é«˜

#### æ’åå±•ç¤º
- å‰3åï¼šé‡‘é“¶é“œç‰Œç‰¹æ®Šå±•ç¤º
- æˆ‘çš„æ’åï¼šé«˜äº®æ˜¾ç¤º
- æ’åå˜åŒ–ï¼šä¸Šå‡â†‘/ä¸‹é™â†“ç®­å¤´

#### æˆå°±ç³»ç»Ÿï¼ˆ17ä¸ªé¢„è®¾æˆå°±ï¼‰

**é‡‘å¸æˆå°±**
- ğŸ’° å°å¯Œç¿ - ç´¯è®¡100é‡‘å¸ï¼ˆæ™®é€šï¼‰
- ğŸ’ å¯Œè±ª - ç´¯è®¡1000é‡‘å¸ï¼ˆç¨€æœ‰ï¼‰
- ğŸ‘‘ é‡‘å¸å¤§äº¨ - ç´¯è®¡10000é‡‘å¸ï¼ˆå²è¯—ï¼‰

**è¿èƒœæˆå°±**
- ğŸ”¥ ä¸€å‘¨æˆ˜å£« - è¿ç»­7å¤©ï¼ˆæ™®é€šï¼‰
- ğŸ† æœˆåº¦å† å†› - è¿ç»­30å¤©ï¼ˆç¨€æœ‰ï¼‰
- â­ ç™¾æ—¥ä¼ å¥‡ - è¿ç»­100å¤©ï¼ˆä¼ è¯´ï¼‰

**ä¸“æ³¨æˆå°±**
- ğŸ¯ ä¸“æ³¨æ–°æ‰‹ - ç´¯è®¡10å°æ—¶ï¼ˆæ™®é€šï¼‰
- ğŸ§˜ ä¸“æ³¨å¤§å¸ˆ - ç´¯è®¡100å°æ—¶ï¼ˆç¨€æœ‰ï¼‰
- ğŸŒŸ ä¸“æ³¨ä¼ è¯´ - ç´¯è®¡1000å°æ—¶ï¼ˆä¼ è¯´ï¼‰

**ä»»åŠ¡æˆå°±**
- âœ… è¡ŒåŠ¨æ´¾ - å®Œæˆ10ä¸ªä»»åŠ¡ï¼ˆæ™®é€šï¼‰
- ğŸš€ æ•ˆç‡è¾¾äºº - å®Œæˆ100ä¸ªä»»åŠ¡ï¼ˆç¨€æœ‰ï¼‰
- ğŸ’ª ä»»åŠ¡ç‹‚é­” - å®Œæˆ1000ä¸ªä»»åŠ¡ï¼ˆå²è¯—ï¼‰

**å® ç‰©æˆå°±**
- ğŸ¾ å® ç‰©è®­ç»ƒå¸ˆ - å® ç‰©10çº§ï¼ˆæ™®é€šï¼‰
- ğŸ¦„ å® ç‰©å¤§å¸ˆ - å® ç‰©30çº§ï¼ˆç¨€æœ‰ï¼‰
- ğŸ‰ å® ç‰©ä¼ è¯´ - å® ç‰©50çº§ï¼ˆä¼ è¯´ï¼‰

**ç‰¹æ®Šæˆå°±**
- ğŸ‰ åˆæ¬¡å°è¯• - å®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡
- ğŸ± å® ç‰©ä¸»äºº - é¢†å…»ç¬¬ä¸€åªå® ç‰©
- ğŸ¯ ä¸“æ³¨å¼€å§‹ - å®Œæˆç¬¬ä¸€æ¬¡ä¸“æ³¨

---

## ğŸ”— ç³»ç»Ÿé›†æˆ

### ä¸ç°æœ‰ç³»ç»Ÿçš„è”åŠ¨

#### 1. ä¸é©±åŠ¨åŠ›ç³»ç»Ÿï¼ˆdriveStoreï¼‰è”åŠ¨
```typescript
// ä¸“æ³¨å®Œæˆ â†’ è·å¾—é‡‘å¸
focusStore.stopFocus(true) 
  â†’ driveStore.earnGold(goldAmount)

// åä¹ æƒ¯æƒ©ç½š â†’ æ‰£é™¤é‡‘å¸
badHabitStore.recordBadHabit(type, severity)
  â†’ driveStore.spendGold(penalty)

// å® ç‰©åŠ æˆ â†’ é‡‘å¸å€ç‡
taskComplete â†’ goldEarned Ã— petStore.currentPet.goldBonus
```

#### 2. ä¸ä»»åŠ¡ç³»ç»Ÿï¼ˆtaskStoreï¼‰è”åŠ¨
```typescript
// ä»»åŠ¡å®Œæˆ â†’ å® ç‰©è·å¾—ç»éªŒ
taskStore.completeTask()
  â†’ petStore.gainExp(expAmount)

// ä»»åŠ¡æ‹–å»¶ â†’ è§¦å‘åä¹ æƒ¯æ£€æµ‹
taskStore.checkOverdue()
  â†’ badHabitStore.detectProcrastination()
```

#### 3. è‡ªåŠ¨æ£€æµ‹è§¦å‘ç‚¹
```typescript
// åœ¨ taskStore ä¸­æ·»åŠ 
onTaskComplete() {
  // æ£€æŸ¥ç†¬å¤œ
  badHabitStore.detectLateNight();
  
  // æ£€æŸ¥è¿‡åº¦æ‰¿è¯º
  const todoCount = tasks.filter(t => !t.completed).length;
  badHabitStore.detectOvercommit(todoCount);
}

// åœ¨ focusStore ä¸­æ·»åŠ 
onFocusInterrupt() {
  badHabitStore.detectDistraction('ä¸“æ³¨æ¨¡å¼ä¸­é€”é€€å‡º');
}
```

---

## ğŸ¨ UIç»„ä»¶ä½¿ç”¨æŒ‡å—

### åœ¨é¡µé¢ä¸­é›†æˆç»„ä»¶

```tsx
import { PetWidget } from '@/components/pet/PetWidget';
import { PetShop } from '@/components/pet/PetShop';
import { FocusTimer } from '@/components/focus/FocusTimer';
import { FocusStatsPanel } from '@/components/focus/FocusStatsPanel';
import { BadHabitTracker } from '@/components/habit/BadHabitTracker';
import { LeaderboardPanel } from '@/components/leaderboard/LeaderboardPanel';

function Dashboard() {
  return (
    <div className="dashboard">
      {/* å·¦ä¾§ï¼šå® ç‰©å’Œä¸“æ³¨ */}
      <div className="left-panel">
        <PetWidget />
        <FocusTimer />
      </div>
      
      {/* ä¸­é—´ï¼šä¸»è¦å†…å®¹ */}
      <div className="main-content">
        {/* ä½ çš„ä»»åŠ¡åˆ—è¡¨ç­‰ */}
      </div>
      
      {/* å³ä¾§ï¼šç»Ÿè®¡å’Œæ’è¡Œæ¦œ */}
      <div className="right-panel">
        <FocusStatsPanel />
        <BadHabitTracker />
        <LeaderboardPanel />
      </div>
    </div>
  );
}
```

---

## ğŸ“Š æ•°æ®æŒä¹…åŒ–

æ‰€æœ‰æ•°æ®é€šè¿‡ Zustand persist ä¸­é—´ä»¶è‡ªåŠ¨ä¿å­˜åˆ° localStorageï¼š

```typescript
// å­˜å‚¨é”®å
'manifestos-pet-storage'         // å® ç‰©æ•°æ®
'manifestos-focus-storage'       // ä¸“æ³¨æ•°æ®
'manifestos-bad-habit-storage'   // åä¹ æƒ¯æ•°æ®
'manifestos-leaderboard-storage' // æ’è¡Œæ¦œæ•°æ®
```

---

## ğŸš€ å¯åŠ¨æµç¨‹

åœ¨ `App.tsx` ä¸­å·²è‡ªåŠ¨åˆå§‹åŒ–ï¼š

```typescript
// 1. å¯åŠ¨å® ç‰©çŠ¶æ€æ›´æ–°æœåŠ¡ï¼ˆæ¯5åˆ†é’Ÿï¼‰
petUpdateService.start();

// 2. åˆå§‹åŒ–å® ç‰©å•†åº—
usePetStore.getState().initializeShop();

// 3. æ£€æŸ¥æˆå°±
useLeaderboardStore.getState().checkAchievements();

// 4. ä¸“æ³¨è®¡æ—¶å™¨ï¼ˆåœ¨ç»„ä»¶å†…è‡ªåŠ¨è¿è¡Œï¼‰
// FocusTimer ç»„ä»¶å†…éƒ¨ä½¿ç”¨ useEffect ç®¡ç†è®¡æ—¶å™¨
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. é›†æˆåˆ°ä¸»ç•Œé¢
- åœ¨ Dashboard ä¸­æ·»åŠ å® ç‰©å°éƒ¨ä»¶ï¼ˆå³ä¸Šè§’æˆ–ä¾§è¾¹æ ï¼‰
- åœ¨ä»»åŠ¡åˆ—è¡¨æ—æ·»åŠ ä¸“æ³¨æ¨¡å¼å¿«æ·å…¥å£
- åœ¨è®¾ç½®é¡µé¢æ·»åŠ åä¹ æƒ¯è¿½è¸ªå¼€å…³

### 2. å¢å¼ºè‡ªåŠ¨æ£€æµ‹
```typescript
// åœ¨ taskStore.ts ä¸­æ·»åŠ 
import { useBadHabitStore } from '@/stores/badHabitStore';

// ä»»åŠ¡å®Œæˆæ—¶
completeTask(taskId) {
  // ... åŸæœ‰é€»è¾‘
  
  // æ£€æµ‹ç†¬å¤œ
  useBadHabitStore.getState().detectLateNight();
  
  // æ£€æµ‹è¿‡åº¦æ‰¿è¯º
  const todoCount = this.tasks.filter(t => !t.completed).length;
  useBadHabitStore.getState().detectOvercommit(todoCount);
}

// ä»»åŠ¡è¶…æœŸæ—¶
checkOverdueTasks() {
  const now = new Date();
  this.tasks.forEach(task => {
    if (task.dueDate && new Date(task.dueDate) < now && !task.completed) {
      const daysOverdue = Math.floor((now - new Date(task.dueDate)) / (1000 * 60 * 60 * 24));
      useBadHabitStore.getState().detectProcrastination(task.id, task.title, daysOverdue);
    }
  });
}
```

### 3. æ’è¡Œæ¦œæ•°æ®æ¨¡æ‹Ÿ
```typescript
// åœ¨å¼€å‘é˜¶æ®µï¼Œå¯ä»¥æ·»åŠ æ¨¡æ‹Ÿæ•°æ®
const mockRankings = [
  { userId: '1', username: 'å¼ ä¸‰', rank: 1, score: 10000, change: 2 },
  { userId: '2', username: 'æå››', rank: 2, score: 8500, change: -1 },
  // ...
];

useLeaderboardStore.getState().updateLeaderboard('gold', mockRankings);
```

### 4. é€šçŸ¥æƒé™è¯·æ±‚
```typescript
// åœ¨ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨ä¸“æ³¨æ¨¡å¼æ—¶è¯·æ±‚é€šçŸ¥æƒé™
if ('Notification' in window && Notification.permission === 'default') {
  Notification.requestPermission().then(permission => {
    if (permission === 'granted') {
      console.log('âœ… é€šçŸ¥æƒé™å·²æˆäºˆ');
    }
  });
}
```

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œæ³¨æ„äº‹é¡¹

1. **å® ç‰©æ­»äº¡**ï¼šå¦‚æœå® ç‰©å¥åº·å€¼é™è‡³0ï¼Œå® ç‰©ä¼šæ­»äº¡ï¼Œéœ€è¦é‡æ–°é¢†å…»
2. **ä¸“æ³¨ä¸­æ–­**ï¼šä¸¥æ ¼æ¨¡å¼ä¸‹ä¸å…è®¸ä¸­é€”é€€å‡ºï¼Œè¯·è°¨æ…ä½¿ç”¨
3. **åä¹ æƒ¯æƒ©ç½š**ï¼šå¯èƒ½å¯¼è‡´é‡‘å¸ä¸ºè´Ÿï¼Œéœ€è¦å®Œæˆç´§æ€¥ä»»åŠ¡æ¢å¤
4. **æ’è¡Œæ¦œæ•°æ®**ï¼šç›®å‰ä¸ºæœ¬åœ°æ•°æ®ï¼Œéœ€è¦åç«¯æ”¯æŒæ‰èƒ½å®ç°çœŸå®æ’è¡Œæ¦œ

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å® ç‰©çŠ¶æ€æ›´æ–°**ï¼šå·²è®¾ç½®ä¸ºæ¯5åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼Œé¿å…é¢‘ç¹è®¡ç®—
2. **ä¸“æ³¨è®¡æ—¶å™¨**ï¼šä½¿ç”¨å•ä¸€ setIntervalï¼Œé¿å…å¤šä¸ªè®¡æ—¶å™¨
3. **æˆå°±æ£€æŸ¥**ï¼šåªåœ¨å…³é”®æ“ä½œåè§¦å‘ï¼Œä¸æ˜¯å®æ—¶æ£€æŸ¥
4. **æ•°æ®æŒä¹…åŒ–**ï¼šä½¿ç”¨ Zustand persistï¼Œè‡ªåŠ¨èŠ‚æµå†™å…¥

---

## ğŸ‰ æ€»ç»“

ç¬¬ä¸‰é˜¶æ®µå·²å®Œæˆæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼š

âœ… **è™šæ‹Ÿå® ç‰©ç³»ç»Ÿ** - 6ç§å® ç‰©ï¼Œå®Œæ•´çš„å…»æˆæœºåˆ¶
âœ… **ä¸“æ³¨æ¨¡å¼** - 3ç§æ¨¡å¼ï¼Œç•ªèŒ„é’Ÿè‡ªåŠ¨å¾ªç¯
âœ… **åä¹ æƒ¯çŸ«æ­£** - 7ç§ä¹ æƒ¯æ£€æµ‹ï¼Œ21å¤©æŒ‘æˆ˜
âœ… **æ’è¡Œæ¦œç³»ç»Ÿ** - 5ç§æ’è¡Œæ¦œï¼Œ17ä¸ªæˆå°±

æ‰€æœ‰ç³»ç»Ÿå·²å®Œæˆå¼€å‘å¹¶é›†æˆåˆ°åº”ç”¨ä¸­ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•å’Œä¼˜åŒ–ï¼

