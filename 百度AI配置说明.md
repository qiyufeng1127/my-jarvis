# 百度AI图像识别配置说明

## 为什么需要配置百度AI？

您的应用使用了**任务验证系统**，需要通过拍照验证来确保任务真正完成。百度AI图像识别服务可以自动识别照片中的内容，判断是否包含验证关键词（如"厨房"、"水槽"、"干净的碗"等）。

**如果不配置百度AI，验证功能将无法使用，会提示错误。**

---

## 配置步骤

### 1. 注册百度AI账号

访问：https://ai.baidu.com/

- 如果已有百度账号，直接登录
- 如果没有，点击"注册"创建新账号

### 2. 创建应用

1. 登录后，点击右上角"控制台"
2. 在左侧菜单找到"图像识别" -> "通用物体和场景识别"
3. 点击"创建应用"
4. 填写应用信息：
   - 应用名称：ManifestOS（或任意名称）
   - 应用描述：个人任务管理系统
   - 接口选择：勾选"通用物体和场景识别"
5. 点击"立即创建"

### 3. 获取API密钥

创建成功后，在应用列表中可以看到：
- **API Key**：一串字符，类似 `ABCdefGHIjklMNOpqrSTUvwxYZ123456`
- **Secret Key**：另一串字符，类似 `XYZabcDEFghiJKLmnoPQRstUVWxyz789`

**请妥善保管这两个密钥，不要泄露给他人！**

### 4. 配置到项目中

#### 方法一：创建 .env 文件（推荐）

1. 在项目根目录（`w:/001jiaweis/22222/`）创建一个名为 `.env` 的文件
2. 复制以下内容到文件中：

```env
# 百度AI图像识别配置
VITE_BAIDU_API_KEY=你的API_KEY
VITE_BAIDU_SECRET_KEY=你的SECRET_KEY
```

3. 将 `你的API_KEY` 和 `你的SECRET_KEY` 替换为你在步骤3中获取的实际密钥

**示例：**
```env
VITE_BAIDU_API_KEY=ABCdefGHIjklMNOpqrSTUvwxYZ123456
VITE_BAIDU_SECRET_KEY=XYZabcDEFghiJKLmnoPQRstUVWxyz789
```

#### 方法二：使用 .env.example 模板

1. 项目中已经有一个 `.env.example` 文件
2. 复制这个文件并重命名为 `.env`
3. 打开 `.env` 文件，填入你的密钥

### 5. 重启开发服务器

配置完成后，**必须重启开发服务器**才能生效：

1. 在终端中按 `Ctrl + C` 停止当前服务器
2. 重新运行 `npm run dev`
3. 等待服务器启动完成

---

## 验证配置是否成功

### 测试方法

1. 创建一个任务（如"洗碗"）
2. 点击任务卡片上的 ⏱️ 图标，启用验证
3. AI会自动生成验证关键词（如"厨房"、"水槽"、"洗洁精"）
4. 点击"start"按钮，选择"拍照验证"或"相册上传"
5. 上传一张**不包含**这些内容的照片

**预期结果：**
- ✅ 如果配置成功：会提示"验证失败！需要的内容：厨房、水槽、洗洁精"
- ❌ 如果配置失败：会提示"百度AI未配置，请在设置中配置 API Key 和 Secret Key"

### 查看日志

打开浏览器的开发者工具（F12），查看 Console 标签页：

- ✅ 配置成功：会看到 `🔍 百度AI识别结果: ["厨房", "水槽", ...]`
- ❌ 配置失败：会看到 `❌ 百度AI未配置，无法进行图片验证`

---

## 常见问题

### Q1: 提示"百度AI未配置"

**原因：** `.env` 文件不存在或配置错误

**解决方法：**
1. 检查项目根目录是否有 `.env` 文件（注意：文件名以点开头）
2. 检查文件内容是否正确填写了 API Key 和 Secret Key
3. 确保没有多余的空格或引号
4. 重启开发服务器

### Q2: 提示"获取Access Token失败"

**原因：** API Key 或 Secret Key 填写错误

**解决方法：**
1. 重新登录百度AI控制台
2. 复制正确的 API Key 和 Secret Key
3. 更新 `.env` 文件
4. 重启开发服务器

### Q3: 提示"图像识别失败"

**原因：** 网络问题或百度API服务异常

**解决方法：**
1. 检查网络连接
2. 稍后重试
3. 查看百度AI控制台是否有服务公告

### Q4: 验证总是失败

**原因：** 照片中确实不包含验证关键词

**解决方法：**
1. 确保拍摄的照片包含验证关键词中的内容
2. 光线充足，画面清晰
3. 关键词要在照片中清晰可见
4. 如果关键词不合理，可以点击 ⏱️ 图标编辑验证关键词

### Q5: .env 文件在哪里？

**位置：** 项目根目录（与 `package.json` 同级）

**完整路径：** `w:/001jiaweis/22222/.env`

**注意：**
- 文件名以点（`.`）开头
- Windows 系统中，创建以点开头的文件需要使用命令行或代码编辑器
- 不要将 `.env` 文件上传到 Git（已在 `.gitignore` 中排除）

---

## 免费额度

百度AI图像识别服务提供免费额度：

- **每天 500 次**免费调用
- 超出后按次数收费（价格很低）
- 对于个人使用完全够用

---

## 安全提示

1. **不要泄露密钥**：API Key 和 Secret Key 是敏感信息，不要分享给他人
2. **不要上传到 Git**：`.env` 文件已在 `.gitignore` 中排除，不会被上传
3. **定期更换密钥**：如果怀疑密钥泄露，及时在百度AI控制台重置

---

## 需要帮助？

如果配置过程中遇到问题，可以：

1. 查看浏览器控制台的错误信息
2. 查看百度AI官方文档：https://ai.baidu.com/ai-doc/
3. 检查 `.env` 文件格式是否正确

---

**配置完成后，您就可以使用强大的任务验证功能了！** 🎉
