# ğŸš€ éªŒè¯å¼€å…³é›†æˆ - å¿«é€Ÿæ“ä½œæŒ‡å—

## âœ… å½“å‰çŠ¶æ€

**æ ¸å¿ƒä»£ç å·²å®Œæˆï¼** éªŒè¯å¼€å…³é€»è¾‘å·²åœ¨ `useTaskVerificationManager.ts` ä¸­å®ç°ã€‚

## ğŸ¯ åªéœ€ 3 æ­¥å®Œæˆé›†æˆ

### ç¬¬ 1 æ­¥ï¼šæ‰¾åˆ° start æŒ‰é’®æ‰€åœ¨çš„ç»„ä»¶

æ ¹æ®æ‚¨çš„æˆªå›¾ï¼Œstart æŒ‰é’®æœ€å¯èƒ½åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼š

1. **`src/components/calendar/NewTimelineView.tsx`** â­ æœ€å¯èƒ½
2. `src/components/calendar/TaskCard.tsx`
3. `src/components/task/TaskCard.tsx`

**å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°ï¼š**
- åœ¨ VSCode ä¸­æŒ‰ `Ctrl + Shift + F` å…¨å±€æœç´¢
- æœç´¢å…³é”®è¯ï¼š`"start"` æˆ– `*start*`
- æŸ¥æ‰¾åŒ…å« `<button` çš„è¡Œ

### ç¬¬ 2 æ­¥ï¼šåœ¨ç»„ä»¶é¡¶éƒ¨å¼•å…¥ hook

åœ¨æ‰¾åˆ°çš„ç»„ä»¶æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ï¼š

```typescript
import { useTaskVerificationManager } from '@/hooks/useTaskVerificationManager';
```

åœ¨ç»„ä»¶å‡½æ•°å†…éƒ¨æ·»åŠ ï¼š

```typescript
const { manualStartTask, manualCompleteTask } = useTaskVerificationManager();
```

### ç¬¬ 3 æ­¥ï¼šä¿®æ”¹æŒ‰é’®çš„ onClick

**æ‰¾åˆ° start æŒ‰é’®ï¼Œå°†å…¶ onClick æ”¹ä¸ºï¼š**

```typescript
// åŸæ¥å¯èƒ½æ˜¯ï¼š
<button onClick={() => handleSomeFunction(task.id)}>start</button>

// æ”¹ä¸ºï¼š
<button onClick={() => manualStartTask(task.id)}>start</button>
```

**æ‰¾åˆ°å®ŒæˆæŒ‰é’®ï¼Œå°†å…¶ onClick æ”¹ä¸ºï¼š**

```typescript
// åŸæ¥å¯èƒ½æ˜¯ï¼š
<button onClick={() => handleComplete(task.id)}>å®Œæˆ</button>

// æ”¹ä¸ºï¼š
<button onClick={() => manualCompleteTask(task.id)}>å®Œæˆ</button>
```

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæœ€ç®€å•çš„é›†æˆ

```typescript
import { useTaskVerificationManager } from '@/hooks/useTaskVerificationManager';

export default function NewTimelineView({ tasks, ... }) {
  // æ·»åŠ è¿™ä¸€è¡Œ
  const { manualStartTask, manualCompleteTask } = useTaskVerificationManager();
  
  // ... å…¶ä»–ä»£ç  ...
  
  return (
    <div>
      {tasks.map(task => (
        <div key={task.id}>
          {/* ä¿®æ”¹ start æŒ‰é’® */}
          {task.status === 'scheduled' && (
            <button onClick={() => manualStartTask(task.id)}>
              start
            </button>
          )}
          
          {/* ä¿®æ”¹å®ŒæˆæŒ‰é’® */}
          {task.status === 'in_progress' && (
            <button onClick={() => manualCompleteTask(task.id)}>
              å®Œæˆ
            </button>
          )}
        </div>
      ))}
    </div>
  );
}
```

### ç¤ºä¾‹ 2ï¼šä¿ç•™åŸæœ‰é€»è¾‘çš„é›†æˆ

å¦‚æœæŒ‰é’®å·²ç»æœ‰å…¶ä»–é€»è¾‘ï¼Œå¯ä»¥è¿™æ ·é›†æˆï¼š

```typescript
const { manualStartTask, manualCompleteTask } = useTaskVerificationManager();

// åŸæœ‰çš„å¤„ç†å‡½æ•°
const handleStartClick = async (taskId: string) => {
  // åŸæœ‰çš„é€»è¾‘ï¼ˆå¦‚æœæœ‰ï¼‰
  // ... å…¶ä»–ä»£ç  ...
  
  // æ·»åŠ éªŒè¯å¼€å…³é€»è¾‘
  await manualStartTask(taskId);
};

const handleCompleteClick = async (taskId: string) => {
  // åŸæœ‰çš„é€»è¾‘ï¼ˆå¦‚æœæœ‰ï¼‰
  // ... å…¶ä»–ä»£ç  ...
  
  // æ·»åŠ éªŒè¯å¼€å…³é€»è¾‘
  await manualCompleteTask(taskId);
};
```

## ğŸ” å¦‚ä½•éªŒè¯é›†æˆæˆåŠŸ

### æµ‹è¯•æ­¥éª¤ï¼š

1. **æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°**ï¼ˆF12ï¼‰
2. **ç‚¹å‡»ä»»åŠ¡çš„ start æŒ‰é’®**
3. **æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š**

**å¦‚æœçœ‹åˆ°ä»¥ä¸‹ä»»ä¸€è¾“å‡ºï¼Œè¯´æ˜é›†æˆæˆåŠŸï¼š**

```
âœ… å¼€å¯éªŒè¯æ¨¡å¼ï¼š
ğŸ‘† [éªŒè¯ç®¡ç†å™¨] æ‰‹åŠ¨å¼€å§‹ä»»åŠ¡: xxx
ğŸš€ [éªŒè¯ç®¡ç†å™¨] è§¦å‘å¯åŠ¨éªŒè¯: xxx
ï¼ˆç„¶åæ˜¾ç¤ºéªŒè¯ç•Œé¢ï¼‰

âœ… å…³é—­éªŒè¯æ¨¡å¼ï¼š
ğŸ‘† [éªŒè¯ç®¡ç†å™¨] æ‰‹åŠ¨å¼€å§‹ä»»åŠ¡: xxx
âš¡ [éªŒè¯ç®¡ç†å™¨] æœªå¼€å¯éªŒè¯å¼€å…³ï¼Œç›´æ¥è®°å½•å¼€å§‹æ—¶é—´
ï¼ˆä»»åŠ¡ç›´æ¥å¼€å§‹ï¼Œæ— éªŒè¯ç•Œé¢ï¼‰
```

## ğŸ¨ å¯é€‰ï¼šæ·»åŠ è§†è§‰æç¤º

åœ¨ä»»åŠ¡å¡ç‰‡ä¸Šæ˜¾ç¤ºéªŒè¯å¼€å…³çŠ¶æ€ï¼š

```typescript
{/* éªŒè¯å¼€å…³çŠ¶æ€å¾½ç«  */}
<div className="flex gap-2">
  {task.verificationStart && (
    <span className="px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-700">
      ğŸ“¸ å¯åŠ¨éªŒè¯
    </span>
  )}
  {task.verificationComplete && (
    <span className="px-2 py-1 text-xs rounded-full bg-green-100 text-green-700">
      ğŸ“¸ å®ŒæˆéªŒè¯
    </span>
  )}
</div>
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ç‚¹å‡»æŒ‰é’®æ²¡ååº”ï¼Ÿ

**æ£€æŸ¥ï¼š**
1. æ˜¯å¦æ­£ç¡®å¼•å…¥äº† `useTaskVerificationManager`
2. æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
3. `task.id` æ˜¯å¦æ­£ç¡®ä¼ é€’

### Q2: éªŒè¯ç•Œé¢æ²¡æœ‰æ˜¾ç¤ºï¼Ÿ

**åŸå› ï¼š** ä»»åŠ¡æ²¡æœ‰è®¾ç½® `verificationStart` å­—æ®µ

**è§£å†³ï¼š** åœ¨åˆ›å»ºä»»åŠ¡æ—¶æ·»åŠ ï¼š

```typescript
const newTask = {
  // ... å…¶ä»–å­—æ®µ
  verificationStart: {
    enabled: true,
    requirement: 'è¯·æ‹æ‘„ä»»åŠ¡å¼€å§‹çš„ç…§ç‰‡',
    timeout: 120, // 2åˆ†é’Ÿ
  },
  verificationComplete: {
    enabled: true,
    requirement: 'è¯·æ‹æ‘„ä»»åŠ¡å®Œæˆçš„ç…§ç‰‡',
    timeout: 120,
  },
};
```

### Q3: æƒ³è¦æŸäº›ä»»åŠ¡ä¸éªŒè¯ï¼Ÿ

**è§£å†³ï¼š** åˆ›å»ºä»»åŠ¡æ—¶ä¸è®¾ç½® `verificationStart` å’Œ `verificationComplete` å­—æ®µå³å¯ã€‚

```typescript
const quickTask = {
  // ... å…¶ä»–å­—æ®µ
  // ä¸è®¾ç½® verificationStart å’Œ verificationComplete
};
// è¿™ä¸ªä»»åŠ¡ç‚¹å‡» start ä¼šç›´æ¥å¼€å§‹ï¼Œæ— éªŒè¯æµç¨‹
```

## ğŸ“¦ ä½¿ç”¨æˆ‘åˆ›å»ºçš„ç¤ºä¾‹ç»„ä»¶

å¦‚æœæ‚¨æƒ³å¿«é€Ÿæµ‹è¯•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘åˆ›å»ºçš„ç¤ºä¾‹ç»„ä»¶ï¼š

**æ–‡ä»¶ï¼š** `src/components/calendar/TaskCardWithVerification.tsx`

```typescript
import TaskCardWithVerification from '@/components/calendar/TaskCardWithVerification';

// åœ¨æ‚¨çš„ç»„ä»¶ä¸­ä½¿ç”¨
<TaskCardWithVerification task={task} />
```

è¿™ä¸ªç»„ä»¶å·²ç»å®Œæ•´é›†æˆäº†éªŒè¯å¼€å…³åŠŸèƒ½ï¼

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æ‰¾åˆ° start æŒ‰é’®æ‰€åœ¨çš„ç»„ä»¶æ–‡ä»¶
- [ ] åœ¨ç»„ä»¶é¡¶éƒ¨å¼•å…¥ `useTaskVerificationManager`
- [ ] åœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ hook è·å– `manualStartTask` å’Œ `manualCompleteTask`
- [ ] ä¿®æ”¹ start æŒ‰é’®çš„ onClick ä¸º `manualStartTask(task.id)`
- [ ] ä¿®æ”¹å®ŒæˆæŒ‰é’®çš„ onClick ä¸º `manualCompleteTask(task.id)`
- [ ] åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
- [ ] æµ‹è¯•å¼€å¯éªŒè¯çš„ä»»åŠ¡ï¼ˆåº”æ˜¾ç¤ºéªŒè¯ç•Œé¢ï¼‰
- [ ] æµ‹è¯•å…³é—­éªŒè¯çš„ä»»åŠ¡ï¼ˆåº”ç›´æ¥å¼€å§‹/å®Œæˆï¼‰

## ğŸ‰ å®Œæˆåçš„æ•ˆæœ

### å¼€å¯éªŒè¯å¼€å…³çš„ä»»åŠ¡ï¼š
```
ç‚¹å‡» start â†’ æ˜¾ç¤ºå…¨å±éªŒè¯ç•Œé¢ â†’ æ‹ç…§ä¸Šä¼  â†’ AIéªŒè¯ â†’ å€’è®¡æ—¶ â†’ è·å¾—é‡‘å¸
```

### å…³é—­éªŒè¯å¼€å…³çš„ä»»åŠ¡ï¼š
```
ç‚¹å‡» start â†’ ç›´æ¥å¼€å§‹ä»»åŠ¡ â†’ ç‚¹å‡»å®Œæˆ â†’ ç›´æ¥å®Œæˆ âœ…
```

**ä½ä¾µå…¥ã€é›¶ä¿®æ”¹æ ¸å¿ƒä»£ç ã€å®Œç¾å®ç°ï¼** ğŸ¯

---

## ğŸ’¡ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæ‚¨åœ¨é›†æˆè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŠŠ start æŒ‰é’®æ‰€åœ¨çš„ä»£ç ç‰‡æ®µå‘ç»™æˆ‘
2. æˆ–è€…å‘Šè¯‰æˆ‘æ–‡ä»¶åå’Œå¤§æ¦‚ä½ç½®
3. æˆ‘ä¼šå¸®æ‚¨å®Œæˆå…·ä½“çš„ä¿®æ”¹

**æ ¸å¿ƒé€»è¾‘å·²ç»å®Œæˆï¼Œåªå·®æœ€åä¸€æ­¥è¿æ¥æŒ‰é’®ï¼** ğŸš€





