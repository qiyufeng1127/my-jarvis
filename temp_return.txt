  const timePassed = calculateTimePassedToday();

  return (
    <div className="space-y-3 pb-4 relative">
      {/* ä»Šæ—¥å·²è¿‡å»æç¤º - åœ¨ç¬¬ä¸€ä¸ªä»»åŠ¡å‰ */}
      {timePassed && timePassed.totalMinutes > 0 && (
        <div className="flex items-center gap-3 mb-2">
          {/* å·¦ä¾§æ—¶é—´å¯¹é½ */}
          <div className="w-12 flex-shrink-0 text-left">
            <div className="text-sm font-semibold" style={{ color: accentColor }}>
              00:00
            </div>
          </div>

          {/* ä»Šæ—¥å·²è¿‡å»æŒ‰é’® */}
          <button
            onClick={() => {
              // å¯ä»¥æ·»åŠ ä¸€äº›äº¤äº’ï¼Œæ¯”å¦‚æ˜¾ç¤ºè¯¦ç»†ç»Ÿè®¡
              alert(`ä»Šå¤©å·²ç»è¿‡å»äº† ${timePassed.hours}å°æ—¶${timePassed.mins}åˆ†é’Ÿ`);
            }}
            className="flex items-center gap-2 px-4 py-2 rounded-full transition-all hover:scale-105"
              style={{ 
                backgroundColor: isDark ? 'rgba(255,255,255,0.15)' : 'rgba(255,255,255,0.9)',
                border: `2px dashed ${borderColor}`,
              }}
            >
              <div 
                className="w-7 h-7 rounded-full flex items-center justify-center"
                style={{ backgroundColor: '#3B82F6' }}
              >
                <Clock className="w-4 h-4 text-white" />
            </div>
            <span className="text-sm font-semibold" style={{ color: textColor }}>
              ä»Šæ—¥å·²è¿‡å»
              {timePassed.hours > 0 && ` ${timePassed.hours}å°æ—¶`}
              {timePassed.mins > 0 && ` ${timePassed.mins}åˆ†é’Ÿ`}
            </span>
          </button>
          
          {/* é‡‘å¸æ˜¾ç¤ºæŒ‰é’® */}
          <button
            onClick={() => setShowGoldModal(true)}
            className="flex items-center gap-2 px-4 py-2 rounded-full transition-all hover:scale-105 shadow-lg"
            style={{ 
              backgroundColor: goldBalance >= 0 
                ? (isDark ? 'rgba(255,215,0,0.2)' : 'rgba(255,215,0,0.15)')
                : (isDark ? 'rgba(239,68,68,0.2)' : 'rgba(239,68,68,0.15)'),
              border: goldBalance >= 0 ? `2px solid #FFD700` : `2px solid #EF4444`,
            }}
            title="ç‚¹å‡»æŸ¥çœ‹é‡‘å¸æ˜ç»†å’Œå¥–åŠ±å•†åº—"
          >
            <span className="text-xl">ğŸ’°</span>
            <div className="flex flex-col items-start">
              <span className="text-xs opacity-80" style={{ color: goldBalance >= 0 ? '#FFD700' : '#EF4444' }}>
                é‡‘å¸
              </span>
              <span className="text-sm font-bold" style={{ color: goldBalance >= 0 ? '#FFD700' : '#EF4444' }}>
                {goldBalance >= 0 ? goldBalance : `${goldBalance}`}
              </span>
            </div>
          </button>
        </div>
      )}
      
      {/* åº†ç¥æ•ˆæœ */}
      <CelebrationEffect 
        show={showCelebration} 
        goldAmount={celebrationGold}
        onComplete={() => setShowCelebration(false)}
      />
      
      {/* ã€ä½ä¾µå…¥å¼é›†æˆã€‘éªŒè¯æ‰©å±•ç»„ä»¶ - å®Œå…¨ç‹¬ç«‹ï¼Œä¸å½±å“åŸæœ‰ä»£ç  */}
      <TaskVerificationExtension />
      
      {/* é‡‘å¸è¯¦æƒ…å¼¹çª— */}
      <GoldDetailsModal 
        isOpen={showGoldModal}
        onClose={() => setShowGoldModal(false)}
        isDark={isDark}
      />
      
      {/* éªŒè¯å…³é”®è¯ç¼–è¾‘å¯¹è¯æ¡† */}
      {editingVerification && taskVerifications[editingVerification] && (
        <TaskVerificationDialog
          taskId={editingVerification}
          taskTitle={allTasks.find(t => t.id === editingVerification)?.title || ''}
          verification={taskVerifications[editingVerification]}
          onClose={() => setEditingVerification(null)}
          onUpdate={(verification) => {
            handleUpdateVerification(editingVerification, verification);
          }}
          onDisable={() => {
            handleDisableVerification(editingVerification);
          }}
          isDark={isDark}
          accentColor={accentColor}
        />
      )}
      

      {/* ç¼–è¾‘ä»»åŠ¡å¼¹çª— - ç´§å‡‘ä¼˜åŒ–ç‰ˆ */}
      {editingTask && (() => {
        const task = allTasks.find(t => t.id === editingTask);
        if (!task) return null;
        
        // åˆå§‹åŒ–ç¼–è¾‘æ•°æ®ï¼ˆé¦–æ¬¡æ‰“å¼€æ—¶ï¼‰
        if (!editedTaskData || editedTaskData.id !== editingTask) {
          setTimeout(() => setEditedTaskData(task), 0);
        }
        
