# 🎯 ManifestOS 完整交互逻辑指南

## 📖 目录

1. [核心概念](#核心概念)
2. [主界面交互](#主界面交互)
3. [模块系统](#模块系统)
4. [AI智能助手](#ai智能助手)
5. [目标管理](#目标管理)
6. [任务系统](#任务系统)
7. [成长体系](#成长体系)
8. [金币经济](#金币经济)
9. [数据流转](#数据流转)

---

## 🎨 核心概念

### 系统定位
ManifestOS 是一个**大女主成长系统**，帮助用户通过任务管理、目标追踪、习惯养成来实现自我提升。

### 核心理念
```
任务完成 → 获得金币 + 成长值 → 等级提升 → 解锁新功能
     ↓
关联长期目标 → 目标进度更新 → 达成里程碑 → 获得成就
     ↓
养成好习惯 → 减少坏习惯 → 提升各维度能力 → 成为更好的自己
```

### 三大支柱
1. **任务系统** - 日常行动的执行层
2. **目标系统** - 长期规划的战略层
3. **成长系统** - 能力提升的反馈层

---

## 🖥️ 主界面交互

### 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  [头像]                                    [状态栏]      │
│  [📊]  ┌──────────────────────────────────────────┐    │
│  [🎯]  │                                          │    │
│  [📅]  │         可拖拽模块区域                    │    │
│  [💰]  │      (自由布局、自定义颜色)               │    │
│  [⚠️]  │                                          │    │
│  [📈]  └──────────────────────────────────────────┘    │
│  [⚙️]                                                   │
│  [🎤]                                                   │
│  [🤖]                                                   │
└─────────────────────────────────────────────────────────┘
```

### 左侧功能栏

| 图标 | 模块名称 | 功能说明 |
|------|---------|---------|
| 📷 | 头像上传 | 点击上传个人头像 |
| 📊 | 总控面板 | 查看整体成长数据 |
| 🎯 | 长期目标 | 管理人生目标 |
| 📅 | 时间轴 | 日程安排和任务执行 |
| 💰 | 金币经济 | 金币收支和奖励兑换 |
| ⚠️ | 坏习惯 | 追踪和改善坏习惯 |
| 📈 | 数据报告 | 查看统计分析 |
| ⚙️ | 设置 | 系统配置 |
| 🎤 | Kiki宝宝 | 语音助手 |
| 🤖 | AI助手 | 智能任务分析 |

### 顶部状态栏

```
┌─────────────────────────────────────────────────────────┐
│ 👑 萌芽新手 Lv.1  📊 0/200 (0%)  ⚡+0本周  ⚠️0%  💰 0  │
└─────────────────────────────────────────────────────────┘
```

**可点击元素：**
- 👑 身份等级 → 查看升级历史
- 📊 成长值 → 查看成长记录
- 💰 金币余额 → 查看交易记录
- ⚠️ 坏习惯 → 查看习惯记录

---

## 🧩 模块系统

### 模块操作

#### 1️⃣ 添加模块
```
点击左侧图标 → 模块出现在主区域 → 可自由拖拽定位
```

#### 2️⃣ 拖拽移动
```
按住模块标题栏 → 拖动到目标位置 → 释放鼠标
```

#### 3️⃣ 调整大小
```
拖动右下角手柄 → 模块整体缩放 → 内容自适应
```

#### 4️⃣ 修改颜色
```
点击调色板图标 → 选择颜色 → 实时预览效果
```

#### 5️⃣ 隐藏模块
```
点击 X 按钮 → 模块隐藏 → 再次点击左侧图标可恢复
```

### 模块状态

| 状态 | 视觉效果 | 说明 |
|------|---------|------|
| 未添加 | 左侧图标正常显示 | 点击可添加 |
| 已添加 | 左侧图标放大+阴影 | 点击可隐藏 |
| 拖拽中 | 鼠标变为抓手 | 跟随鼠标移动 |
| 缩放中 | 右下角高亮 | 实时调整大小 |

---

## 🤖 AI智能助手

### 核心功能

#### 1. 智能任务识别
```
用户输入: "明天早上9点学习React 2小时"
         ↓
AI分析: 提取时间、内容、时长
         ↓
AI输出: 任务建议 + 目标关联 + 金币预估
```

#### 2. 目标智能关联

**匹配流程：**
```
任务描述
  ↓
提取关键词: ["学习", "React", "2小时"]
  ↓
分析领域: [学习, 工作]
  ↓
匹配目标: 
  - "学习前端开发" (85% 匹配)
  - "提升编程技能" (72% 匹配)
  ↓
显示建议 + 匹配原因
```

**匹配算法：**
- 关键词匹配 (50%)
- 名称直接匹配 (40%)
- 领域匹配 (30%)
- 语义相似度 (20%)

#### 3. 对话示例

**场景1：创建学习任务**
```
👤 用户: 明天学习React 2小时

🤖 AI: ✅ 好的！我来帮你分析...

🎯 智能目标关联
我发现这个任务可以关联到以下长期目标：

1. **学习前端开发** (85%)
   ████████░░ 
   关键词匹配: 学习、React
   领域匹配: 学习、工作

💡 完成这个任务将自动更新相关目标的进度！
💰 预计获得: 50金币 + 10成长值

你可以说"创建任务"来确认。
```

**场景2：查询进度**
```
👤 用户: 我今天完成了多少任务？

🤖 AI: 📊 今日数据统计：
- 已完成: 3/5 任务
- 获得金币: +150
- 成长值: +25
- 完成率: 60%

继续加油！还有2个任务等待完成 💪
```

### 快速指令

| 指令 | 功能 | 示例 |
|------|------|------|
| 📅 分解任务 | 将大任务拆分 | "帮我分解学习React的任务" |
| 🕒 时间轴 | 修改日程 | "把明天的会议改到下午3点" |
| 💰 金币 | 计算收益 | "完成这个任务能得多少金币？" |
| 📝 心情 | 记录心情 | "今天感觉很棒！" |
| 🏷️ 标签 | 生成标签 | "给这个任务打标签" |

---

## 🎯 目标管理

### 目标类型

#### 1️⃣ 数值型目标 📊
```
示例: 今年阅读50本书
- 可量化追踪
- 显示进度百分比
- 支持增量更新
```

#### 2️⃣ 里程碑目标 🏁
```
示例: 完成前端项目上线
- 一次性达成
- 分阶段验证
- 达成后庆祝动画
```

#### 3️⃣ 习惯型目标 🔄
```
示例: 每周运动5次
- 持续性追踪
- 连续天数统计
- 习惯养成曲线
```

### 创建目标流程

```
点击"创建新目标"
  ↓
填写基本信息:
  - 目标名称 ✏️
  - 目标类型 📊🏁🔄
  - 目标值 + 单位
  - 截止日期 📅
  ↓
关联成长维度:
  - 学习进步 📚
  - 工作效率 💼
  - 健康管理 💪
  - 财富增长 💰
  - 个人成长 🌱
  ↓
添加描述 📝
  ↓
预览效果 👀
  ↓
保存目标 ✅
```

### 目标卡片

```
┌─────────────────────────────────────┐
│ 📊 数值型  ✓ 已完成                 │
│                                     │
│ 学习前端开发                         │
│                                     │
│ 当前进度                             │
│ 85 / 100 小时                       │
│ ████████░░ 85%                      │
│                                     │
│ 📅 剩余 15 天                        │
│ 📈 最近 +5 小时                      │
│                                     │
│ [编辑] [删除]                        │
└─────────────────────────────────────┘
```

### 目标状态

| 进度 | 颜色 | 说明 |
|------|------|------|
| 0-25% | 灰色 | 刚开始 |
| 25-50% | 橙色 | 进行中 |
| 50-75% | 蓝色 | 接近完成 |
| 75-100% | 绿色 | 即将达成 |
| 100% | 金色 | 已完成 ✓ |

---

## 📅 任务系统

### 任务生命周期

```
创建 → 计划 → 等待开始 → 验证开始 → 执行中 → 验证完成 → 已完成
  ↓      ↓        ↓          ↓         ↓         ↓         ↓
待办   已排期   倒计时     拍照验证   进度检查   拍照验证   获得奖励
```

### 任务属性

| 属性 | 说明 | 示例 |
|------|------|------|
| 标题 | 任务名称 | "学习React Hooks" |
| 类型 | 任务分类 | 工作/学习/健康/生活 |
| 优先级 | 重要程度 | P1-P4 (1最高) |
| 时长 | 预计耗时 | 120分钟 |
| 时间 | 开始/结束 | 明天 9:00-11:00 |
| 目标 | 关联目标 | "学习前端开发" 85% |
| 维度 | 成长维度 | 学习进步 +10 |
| 标签 | 身份标签 | #程序员 #学习者 |
| 验证 | 防拖延 | 开始拍照、完成拍照 |

### 防拖延机制

#### 开始验证
```
任务到达开始时间
  ↓
系统提醒: "该开始学习了！"
  ↓
用户点击"开始"
  ↓
要求拍照验证: 
  - 拍摄学习环境
  - AI识别关键词: 电脑、书本、笔记
  ↓
验证通过 → 任务开始计时
验证失败 → 扣除金币惩罚
```

#### 进度检查
```
任务执行中
  ↓
每30分钟检查一次
  ↓
弹窗: "还在学习吗？"
  ↓
用户确认 → 继续计时
超时未确认 → 标记为失败
```

#### 完成验证
```
用户点击"完成"
  ↓
要求拍照验证:
  - 拍摄学习成果
  - AI识别: 笔记、代码、作品
  ↓
评估完成质量: ⭐⭐⭐⭐⭐
  ↓
发放奖励:
  - 金币 = 基础金币 × 质量系数
  - 成长值 = 时长 × 难度系数
  ↓
更新目标进度
```

---

## 📈 成长体系

### 身份等级系统

```
Lv.1 萌芽新手 (0-200)
  ↓ +200成长值
Lv.2 探索者 (200-400)
  ↓ +200成长值
Lv.3 效率掌控者 (400-600)
  ↓ +200成长值
Lv.4 实践家 (600-800)
  ↓ +200成长值
Lv.5 大师 (800-1000)
  ↓ +200成长值
Lv.6 传奇 (1000+)
```

### 成长维度

| 维度 | 图标 | 说明 | 提升方式 |
|------|------|------|---------|
| 执行力 | 💪 | 完成任务的能力 | 按时完成任务 |
| 专注力 | 🎯 | 持续专注的能力 | 长时间专注工作 |
| 健康力 | ❤️ | 身体健康状况 | 运动、规律作息 |
| 财富力 | 💰 | 财务管理能力 | 理财、赚钱任务 |
| 魅力值 | ✨ | 个人魅力指数 | 社交、形象提升 |

### 成长值获取

```
完成任务 → 基础成长值
  ↓
× 任务难度系数 (0.5-2.0)
  ↓
× 完成质量系数 (0.8-1.5)
  ↓
× 连续完成加成 (1.0-1.3)
  ↓
= 最终成长值
```

---

## 💰 金币经济

### 金币获取

| 来源 | 金额 | 说明 |
|------|------|------|
| 完成任务 | 50-500 | 根据难度和质量 |
| 达成目标 | 100-1000 | 里程碑奖励 |
| 连续签到 | 10-100 | 每日递增 |
| 成就解锁 | 50-500 | 一次性奖励 |
| 习惯养成 | 20-200 | 连续天数奖励 |

### 金币消费

| 用途 | 金额 | 说明 |
|------|------|------|
| 休息时间 | 100-300 | 兑换休息权限 |
| 娱乐活动 | 200-500 | 看电影、玩游戏 |
| 美食奖励 | 50-200 | 零食、大餐 |
| 购物权限 | 300-1000 | 买想要的东西 |
| 自定义奖励 | 自定义 | 用户自己设定 |

### 金币惩罚

| 情况 | 扣除 | 说明 |
|------|------|------|
| 任务失败 | -50 | 未按时完成 |
| 验证失败 | -30 | 拍照验证不通过 |
| 坏习惯 | -20 | 触发坏习惯 |
| 取消任务 | -10 | 主动放弃任务 |

---

## 🔄 数据流转

### 完整数据流

```
用户创建任务
  ↓
AI分析 → 关联目标 (goalStore)
  ↓
保存任务 (taskStore)
  ↓
时间到达 → 提醒用户
  ↓
开始验证 → 拍照识别
  ↓
执行任务 → 进度检查
  ↓
完成验证 → 质量评估
  ↓
发放奖励:
  - 金币 → userStore
  - 成长值 → growthStore
  - 目标进度 → goalStore
  ↓
检查升级 → 等级提升
  ↓
生成报告 → 数据统计
  ↓
显示成就 → 庆祝动画
```

### Store 关系图

```
userStore (用户数据)
  ├─ 金币余额
  ├─ 总成长值
  ├─ 当前等级
  └─ 设置配置

taskStore (任务数据)
  ├─ 任务列表
  ├─ 任务状态
  └─ 关联目标ID

goalStore (目标数据)
  ├─ 目标列表
  ├─ 目标进度
  └─ 关联任务ID

growthStore (成长数据)
  ├─ 各维度数值
  ├─ 成长历史
  └─ 等级信息
```

---

## 🎮 典型使用场景

### 场景1：早晨规划一天

```
1. 打开网站 → 查看今日任务
2. 点击AI助手 → "帮我规划今天的学习任务"
3. AI建议 → 创建3个任务
4. 拖拽到时间轴 → 安排时间
5. 查看目标进度 → 了解整体进展
```

### 场景2：执行任务

```
1. 9:00 收到提醒 → "该开始学习了"
2. 点击开始 → 拍照验证学习环境
3. 验证通过 → 开始计时
4. 30分钟后 → 进度检查弹窗
5. 11:00 完成 → 拍照验证成果
6. 获得奖励 → +50金币 +10成长值
7. 目标进度 → "学习前端开发" 85→87%
```

### 场景3：查看进展

```
1. 点击总控面板 → 查看整体数据
2. 点击数据报告 → 查看详细统计
3. 点击长期目标 → 查看目标进度
4. 点击成长值 → 查看历史记录
5. 发现接近升级 → 继续努力
```

### 场景4：兑换奖励

```
1. 完成一周任务 → 累积500金币
2. 点击金币经济 → 查看奖励商店
3. 选择"看电影" → 花费300金币
4. 确认兑换 → 享受奖励
5. 记录兑换 → 显示在历史中
```

---

## 📱 移动端适配

### 响应式布局

```
桌面端 (>1024px):
  - 左侧栏 + 主区域 + 状态栏
  - 模块自由拖拽
  - 多模块并排显示

平板端 (768-1024px):
  - 折叠左侧栏
  - 主区域占满
  - 模块堆叠显示

手机端 (<768px):
  - 底部导航栏
  - 全屏单模块
  - 滑动切换
```

---

## 🎨 视觉反馈

### 动画效果

| 操作 | 动画 | 时长 |
|------|------|------|
| 模块添加 | 淡入 + 缩放 | 300ms |
| 模块拖拽 | 跟随鼠标 | 实时 |
| 任务完成 | 庆祝动画 | 2s |
| 升级 | 光效 + 音效 | 3s |
| 获得金币 | 金币飞入 | 1s |
| 目标达成 | 烟花效果 | 2s |

### 颜色语义

| 颜色 | 含义 | 使用场景 |
|------|------|---------|
| 🟢 绿色 | 成功、完成 | 任务完成、目标达成 |
| 🔵 蓝色 | 信息、进行中 | 任务执行、数据展示 |
| 🟡 黄色 | 警告、注意 | 坏习惯、即将逾期 |
| 🔴 红色 | 错误、失败 | 任务失败、验证不通过 |
| 🟣 紫色 | 特殊、高级 | 成就、稀有奖励 |

---

## 🔔 通知系统

### 通知类型

```
任务提醒:
  - 任务即将开始 (提前5分钟)
  - 任务进度检查 (每30分钟)
  - 任务即将逾期 (提前1小时)

目标提醒:
  - 目标进度更新
  - 目标即将到期
  - 目标达成庆祝

成长提醒:
  - 等级提升
  - 成就解锁
  - 连续完成奖励

习惯提醒:
  - 坏习惯警告
  - 好习惯鼓励
  - 连续天数里程碑
```

---

## 🎯 核心交互原则

### 1. 即时反馈
```
用户操作 → 立即响应 → 视觉反馈 → 结果确认
```

### 2. 渐进式引导
```
新用户 → 欢迎教程 → 逐步解锁 → 完整功能
```

### 3. 游戏化激励
```
完成任务 → 获得奖励 → 解锁成就 → 持续动力
```

### 4. 智能化辅助
```
AI分析 → 自动关联 → 智能建议 → 减少操作
```

### 5. 数据可视化
```
抽象数据 → 图表展示 → 趋势分析 → 直观理解
```

---

## 📚 相关文档

- [快速开始指南](./QUICK_START.md)
- [AI目标关联](./AI_GOAL_INTEGRATION.md)
- [快速测试指南](./QUICK_TEST_GUIDE.md)
- [目标模块说明](./GOALS_MODULE_ADDED.md)

---

**最后更新**: 2025-01-23
**版本**: v1.0.0

