# 统一任务编辑器 - 使用指南

## 🎯 功能概述

统一任务编辑器是万能收集箱和AI智能助手共享的任务编辑界面，提供一致的编辑体验。

## 📍 使用位置

### 1. 万能收集箱
- 输入碎片化任务（如"洗漱、吃早餐、打扫卫生"）
- 点击"智能分析并分配"
- 自动打开统一任务编辑器

### 2. AI智能助手
- 输入自然语言（如"5分钟后洗漱然后吃早餐"）
- AI识别为任务分解
- 自动打开统一任务编辑器

## ✏️ 编辑功能

### 双击编辑字段
- **任务标题**: 双击标题区域，输入新名称
  - 自动更新：位置、标签、颜色、时长、金币
- **时长**: 双击时长区域，输入分钟数
  - 自动更新：金币、后续任务时间
- **金币**: 双击金币区域，手动调整奖励
- **目标**: 双击目标区域，修改或删除关联目标

### 调整任务顺序
- **上移**: 点击 ↑ 按钮
- **下移**: 点击 ↓ 按钮
- 自动重新计算所有任务时间（紧密衔接，无间隔）

### 管理标签
- **删除标签**: 点击标签上的 × 按钮
- **添加标签**: 点击"+ 标签"按钮，输入新标签
- 标签变化会自动更新任务颜色

### 关联目标
- **选择现有目标**: 点击"🎯 添加目标"下拉菜单
- **创建新目标**: 选择"+ 创建新目标"，输入目标名称
- **删除目标**: 双击目标，然后点击 × 按钮

### 删除任务
- 点击任务卡片右上角的 × 按钮
- 自动重新计算后续任务时间

### 添加新任务
- 点击底部"添加新任务"按钮
- 默认创建30分钟的任务
- 可以编辑所有属性

## 🎨 颜色系统

任务颜色基于第一个标签：

| 标签类型 | 颜色 | 色号 |
|---------|------|------|
| 家务、清洁、日常 | 泥绿色 | #6A7334 |
| 工作、重要、会议 | 卡罗莱纳蓝 | #A0BBEB |
| 社交、朋友 | 覆盆子玫瑰 | #B34568 |
| 娱乐、休闲 | 幻影粉 | #FB9FC9 |
| 学习、成长 | 淡紫色 | #AA9FBE |
| 运动、健康 | 黄铜色 | #A6B13C |
| 饮食 | 奶油黄 | #FFE288 |
| 个人护理 | 浅黄色 | #F1E69F |

## 🤖 智能推断

修改任务标题时，系统会自动推断：

### 位置推断
- 包含"厕所"、"洗漱"、"刷牙" → 厕所
- 包含"工作"、"编程"、"电脑" → 工作区
- 包含"客厅"、"沙发" → 客厅
- 包含"卧室"、"睡觉"、"床" → 卧室
- 包含"拍摄"、"录制"、"视频" → 拍摄间
- 包含"厨房"、"做饭"、"煮" → 厨房
- 包含"室外"、"外出"、"购物" → 室外
- 其他 → 全屋

### 标签推断
- 打扫、清洁、拖地 → 家务、清洁
- 猫、铲猫砂、喂猫 → 家务、猫咪
- 工作、编程、开发 → 工作
- 学习、阅读、看书 → 学习、成长
- 运动、健身、跑步 → 运动、健康
- 吃饭、早餐、午餐 → 饮食
- 洗漱、刷牙、洗脸 → 个人护理

### 时长推断
- 刷牙、洗脸、喝水 → 5分钟
- 洗漱、穿衣 → 10分钟
- 吃饭、早餐、午餐 → 20分钟
- 打扫、拖地、扫地 → 30分钟
- 做饭、煮饭 → 40分钟
- 工作、学习、会议 → 60分钟

### 金币计算
基于时长和任务类型：
- 工作类：基础20 + 时长×8
- 学习类：基础15 + 时长×6
- 运动类：基础30 + 时长×15
- 生活类：基础15 + 时长×7

## ⌨️ 快捷键

- **Enter**: 确认编辑
- **Esc**: 取消编辑（失焦）

## 💡 使用技巧

### 1. 快速批量创建
在万能收集箱输入：
```
洗漱、吃早餐、打扫卫生、工作2小时、午餐、午休
```
AI会自动分解为6个任务，并智能分配时间。

### 2. 精确控制时长
在任务名称中包含时长：
```
工作60分钟、学习30分钟、运动45分钟
```
AI会识别并使用指定的时长。

### 3. 调整任务顺序
使用上下箭头快速调整任务执行顺序，系统会自动重新计算所有时间。

### 4. 关联长期目标
为任务关联目标，可以在成长面板中追踪目标进度。

### 5. 自定义金币奖励
双击金币区域，可以手动调整奖励值，激励自己完成重要任务。

## 🔄 工作流程

1. **输入** → 在收集箱或AI助手输入任务
2. **分析** → AI智能分解和分析任务属性
3. **编辑** → 在统一编辑器中调整任务
4. **推送** → 点击"推送到时间轴"创建任务
5. **执行** → 在时间轴中执行任务
6. **完成** → 获得金币和成长值

## ❓ 常见问题

### Q: 为什么修改标题后其他属性也变了？
A: 系统会智能推断任务属性，确保一致性。如果不满意，可以手动调整。

### Q: 如何保持原有的时长？
A: 修改标题后，立即双击时长区域，输入原来的值。

### Q: 任务时间为什么是连续的？
A: 系统默认任务紧密衔接，无间隔。这样可以最大化时间利用率。

### Q: 可以添加间隔时间吗？
A: 可以手动添加一个"休息"任务，设置5-10分钟。

### Q: 删除任务后时间会重新计算吗？
A: 是的，删除任务后，后续所有任务的时间会自动前移。

## 🎉 最佳实践

1. **先分解，后调整**: 让AI先分解任务，然后根据实际情况微调
2. **合理估时**: 宁可多估一点时间，避免任务超时
3. **关联目标**: 为重要任务关联长期目标，追踪进度
4. **适当休息**: 在长任务之间添加休息时间
5. **灵活调整**: 根据实际情况随时调整任务顺序和时长

---

**提示**: 统一任务编辑器在万能收集箱和AI智能助手中的功能完全相同，学会一个就能熟练使用另一个！

